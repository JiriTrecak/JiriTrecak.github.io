/*! For license information please see sandbox.js.LICENSE.txt */
(()=>{var e={342:e=>{"use strict";var t,r=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,u=(e,t)=>function(){return t||(0,e[i(e)[0]])((t={exports:{}}).exports,t),t.exports},c=(e,t,r,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of i(t))s.call(e,u)||u===r||n(e,u,{get:()=>t[u],enumerable:!(a=o(t,u))||a.enumerable});return e},l=(e,t,o)=>(o=null!=e?r(a(e)):{},c(!t&&e&&e.__esModule?o:n(o,"default",{value:e,enumerable:!0}),e)),d=(e,t,r)=>(((e,t,r)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),f=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},h=(e,t,r)=>(f(e,t,"read from private field"),r?r.call(e):t.get(e)),p=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},m=(e,t,r,n)=>(f(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),g=(e,t,r)=>(f(e,t,"access private method"),r),y=u({"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/pad.js"(e,t){t.exports=function(e,t){var r="000000000"+e;return r.substr(r.length-t)}}}),v=u({"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/fingerprint.browser.js"(e,t){var r=y(),n="object"==typeof window?window:self,o=Object.keys(n).length,i=r(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+o.toString(36),4);t.exports=function(){return i}}}),b=u({"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/lib/getRandomValue.browser.js"(e,t){var r,n,o="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;o?(n=Math.pow(2,32)-1,r=function(){return Math.abs(o.getRandomValues(new Uint32Array(1))[0]/n)}):r=Math.random,t.exports=r}}),w=u({"../../node_modules/.pnpm/cuid@2.1.8/node_modules/cuid/index.js"(e,t){var r=v(),n=y(),o=b(),i=0,a=Math.pow(36,4);function s(){return n((o()*a<<0).toString(36),4)}function u(){return i=i<a?i:0,++i-1}function c(){return"c"+(new Date).getTime().toString(36)+n(u().toString(36),4)+r()+(s()+s())}c.slug=function(){var e=(new Date).getTime().toString(36),t=u().toString(36).slice(-4),n=r().slice(0,1)+r().slice(-1),o=s().slice(-2);return e.slice(-2)+t+n+o},c.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},c.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},c.fingerprint=r,t.exports=c}}),S=u({"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/format.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.format=void 0;var t=/(%?)(%([sdjo]))/g;function r(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":if("string"==typeof e)return e;var r=JSON.stringify(e);return"{}"===r||"[]"===r||/^\[object .+?\]$/.test(r)?e:r}}e.format=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(0===n.length)return e;var i=0,a=e.replace(t,(function(e,t,o,a){var s=r(n[i],a);return t?e:(i++,s)}));return i<n.length&&(a+=" "+n.slice(i).join(" ")),a.replace(/%{2,2}/g,"%")}}}),_=u({"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/invariant.js"(e){var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),n=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.invariant=e.createInvariantWith=e.InvariantError=void 0;var o=S();function i(e){if(e.stack){var t=e.stack.split("\n");t.splice(1,2),e.stack=t.join("\n")}}var a=function(e){function t(t){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var s=e.call(this,t)||this;return s.message=t,s.name="Invariant Violation",s.message=o.format.apply(void 0,n([t],r)),i(s),s}return r(t,e),t}(Error);function s(e){return function(t,r){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];if(!t){var u=o.format.apply(void 0,n([r],a)),c=!!e.prototype.name,l=c?new e(u):e(u);throw i(l),l}}}e.InvariantError=a,e.createInvariantWith=s,e.invariant=s(a),e.invariant.as=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return s(e).apply(void 0,t)}}}),x=u({"../../node_modules/.pnpm/outvariant@1.3.0/node_modules/outvariant/lib/index.js"(e){var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(_(),e),r(S(),e)}}),E=u({"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/createDeferredExecutor.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createDeferredExecutor=void 0,e.createDeferredExecutor=function(){const e=(t,r)=>{e.state="pending",e.resolve=r=>{if("pending"===e.state)return e.result=r,t(r instanceof Promise?r:Promise.resolve(r).then((t=>(e.state="fulfilled",t))))},e.reject=t=>{if("pending"===e.state)return queueMicrotask((()=>{e.state="rejected"})),r(e.rejectionReason=t)}};return e}}}),O=u({"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/DeferredPromise.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeferredPromise=void 0;var t,r,n,o=E();t=new WeakMap,r=new WeakSet,n=function(e){return Object.defineProperties(e,{resolve:{configurable:!0,value:this.resolve},reject:{configurable:!0,value:this.reject}})},e.DeferredPromise=class extends Promise{constructor(e=null){const n=(0,o.createDeferredExecutor)();super(((t,r)=>{n(t,r),e?.(n.resolve,n.reject)})),p(this,r),p(this,t,void 0),d(this,"resolve"),d(this,"reject"),m(this,t,n),this.resolve=h(this,t).resolve,this.reject=h(this,t).reject}get state(){return h(this,t).state}get rejectionReason(){return h(this,t).rejectionReason}then(e,t){return g(this,r,n).call(this,super.then(e,t))}catch(e){return g(this,r,n).call(this,super.catch(e))}finally(e){return g(this,r,n).call(this,super.finally(e))}}}}),k=u({"../../node_modules/.pnpm/@open-draft+deferred-promise@2.1.0/node_modules/@open-draft/deferred-promise/build/index.js"(e){var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(E(),e),r(O(),e)}}),A=u({"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/MemoryLeakError.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryLeakError=void 0;var t=class extends Error{constructor(e,t,r){super(`Possible EventEmitter memory leak detected. ${r} ${t.toString()} listeners added. Use emitter.setMaxListeners() to increase limit`),d(this,"emitter"),d(this,"type"),d(this,"count"),this.emitter=e,this.type=t,this.count=r,this.name="MaxListenersExceededWarning"}};e.MemoryLeakError=t}}),C=u({"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/Emitter.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=void 0;var t,r,n,o,i,a,s,u,c,l,f,y=A(),v=class{constructor(){p(this,o),p(this,a),p(this,u),p(this,l),p(this,t,void 0),p(this,r,void 0),p(this,n,void 0),m(this,t,new Map),m(this,r,v.defaultMaxListeners),m(this,n,!1)}static listenerCount(e,t){return e.listenerCount(t)}setMaxListeners(e){return m(this,r,e),this}getMaxListeners(){return h(this,r)}eventNames(){return Array.from(h(this,t).keys())}emit(e,...t){const r=g(this,o,i).call(this,e);return r.forEach((e=>{e.apply(this,t)})),r.length>0}addListener(e,a){g(this,l,f).call(this,"newListener",e,a);const s=g(this,o,i).call(this,e).concat(a);if(h(this,t).set(e,s),h(this,r)>0&&this.listenerCount(e)>h(this,r)&&!h(this,n)){m(this,n,!0);const t=new y.MemoryLeakError(this,e,this.listenerCount(e));console.warn(t)}return this}on(e,t){return this.addListener(e,t)}once(e,t){return this.addListener(e,g(this,u,c).call(this,e,t))}prependListener(e,r){const n=g(this,o,i).call(this,e);if(n.length>0){const o=[r].concat(n);h(this,t).set(e,o)}else h(this,t).set(e,n.concat(r));return this}prependOnceListener(e,t){return this.prependListener(e,g(this,u,c).call(this,e,t))}removeListener(e,r){const n=g(this,o,i).call(this,e);return n.length>0&&(g(this,a,s).call(this,n,r),h(this,t).set(e,n),g(this,l,f).call(this,"removeListener",e,r)),this}off(e,t){return this.removeListener(e,t)}removeAllListeners(e){return e?h(this,t).delete(e):h(this,t).clear(),this}listeners(e){return Array.from(g(this,o,i).call(this,e))}listenerCount(e){return g(this,o,i).call(this,e).length}rawListeners(e){return this.listeners(e)}},b=v;t=new WeakMap,r=new WeakMap,n=new WeakMap,o=new WeakSet,i=function(e){return h(this,t).get(e)||[]},a=new WeakSet,s=function(e,t){const r=e.indexOf(t);return r>-1&&e.splice(r,1),[]},u=new WeakSet,c=function(e,t){const r=(...n)=>{this.removeListener(e,r),t.apply(this,n)};return r},l=new WeakSet,f=function(e,t,r){this.emit(e,t,r)},d(b,"defaultMaxListeners",10),e.Emitter=b}}),I=u({"../../node_modules/.pnpm/strict-event-emitter@0.4.3/node_modules/strict-event-emitter/lib/index.js"(e){var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(C(),e),r(A(),e)}}),T={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(T,{INJECT_MESSAGE_TYPE:()=>Z,MessageReceiver:()=>D,MessageSender:()=>F,Nodebox:()=>K,PREVIEW_LOADED_MESSAGE_TYPE:()=>X,createDebug:()=>U}),e.exports=(t=T,c(n({},"__esModule",{value:!0}),t));var j=l(w()),M=l(x()),P=l(k()),L=window.localStorage.CSB_EMULATOR_DEBUG,B="[36;1m",N={preview:"[33;1m",emulator:"[35;1m",runtime:B,bridge:"[34m","runtime:worker":B};function U(e){return function(t,...r){if("true"===L){const n=()=>t.includes("sender")?"[32;1msender":t.includes("receiver")?"[31mreceiver":"",o=t.replace(/\[.+\]:/,"");console.log(`${N[e]}${e}:${n()}[0m:${o}`,...r)}}}var R=U("emulator"),D=class{constructor(){d(this,"emitter"),d(this,"senderPort",null),this.emitter=new EventTarget,this.waitForHandshake()}waitForHandshake(){const e=new P.DeferredPromise,t=e=>{const{data:t}=e;R("[message-receiver]: incoming",e),"internal/handshake"===t.type&&((0,M.invariant)(e.ports.length>0,"Failed to confirm a MessageReceiver handshake: received event has no ports"),this.senderPort=e.ports[0],this.addMessageListener(),R("[message-receiver]: handshake received!",this.senderPort),this.send("internal/handshake/done"),R("[message-receiver]: finish handshake"))};return window.addEventListener("message",t),e.then((()=>{window.removeEventListener("message",t)})),window.parent.postMessage({type:"internal/ready"},"*"),e}addMessageListener(){(0,M.invariant)(this.senderPort,"[MessageReceiver] Failed to add a message listener: sender port is not defined. Did you forget to await a handshake?"),this.senderPort.onmessage=e=>{const t=e.data;null!=t.type&&this.emitter.dispatchEvent(new MessageEvent(t.type,{data:t.payload}))}}on(e,t,r){this.emitter.addEventListener(e,(async e=>{if(!(e instanceof MessageEvent))return;const{operationId:r,payload:n}=e.data;try{const e=await t(n);this.send("internal/operation/done",{operationId:r,listenerPayload:e})}catch(e){e instanceof Error&&this.send("internal/operation/failed",{operationId:r,error:e})}}),r)}send(e,...t){(0,M.invariant)(this.senderPort,'[MessageReceiver] Failed to send a message "%j": sender port is not defined. Did you forget to await a handshake?',e);const r=t[0]||{};R('[message-receiver]: send "%s"',e,r),this.senderPort.postMessage({type:e,payload:r})}},F=class{constructor(e){this.target=e,d(this,"emitter"),d(this,"channel"),d(this,"receiverPort"),d(this,"receiverReadyPromise"),this.emitter=new EventTarget,this.channel=new MessageChannel,this.receiverPort=this.channel.port1;const t=new P.DeferredPromise,r=e=>{"internal/ready"===e.data.type&&(R("[message-sender]: runtime is ready"),t.resolve())};window.addEventListener("message",r),t.then((()=>{window.removeEventListener("message",r)})),this.receiverReadyPromise=t,this.receiverPort.onmessage=e=>{const t=e.data;null!=t.type&&(R('[message-sender]: emitting "%s" event...',t.type,t.payload),this.emitter.dispatchEvent(new MessageEvent(t.type,{data:t.payload})))}}async handshake(){const e=new P.DeferredPromise;await this.receiverReadyPromise,R("[message-sender]: sending handshake"),this.target.postMessage({type:"internal/handshake"},"*",[this.channel.port2]),this.on("internal/handshake/done",(()=>{e.resolve(),clearTimeout(t)}));const t=setTimeout((()=>{e.reject(new Error("MessageSender: Handshake timeout"))}),5e3);return e}on(e,t,r){R('[message-sender]: add listener "%s"',e),this.emitter.addEventListener(e,(e=>{e instanceof MessageEvent&&t(e)}),r)}off(e,t,r){this.emitter.removeEventListener(e,t,r)}async send(e,...t){const r=new P.DeferredPromise,n=(0,j.default)(),o=t[0]||{};R('[message-sender]: send "%s" (%s)',e,n,o),this.receiverPort.postMessage({type:e,payload:{operationId:n,payload:o}}),R('[message-sender]: adding done listener for "%s" (%s)',e,n);const i=t=>{const{data:o}=t;if(o.operationId===n){const t=o.listenerPayload||{};R('[message-sender]: resolving "%s (%s) promise!',e,n),r.resolve({...t,operationId:o.operationId})}},a=t=>{const{data:o}=t;o.operationId===n&&(R('[message-sender]: rejecting "%s (%s) promise!',e,n),r.reject(o.error))};return this.on("internal/operation/done",i),this.on("internal/operation/failed",a),r.finally((()=>{this.emitter.removeEventListener("internal/operation/done",i),this.emitter.removeEventListener("internal/operation/failed",a)}))}},$=l(x()),z=l(k()),W=l(w()),J=l(x()),V=l(x()),H=l(I()),q=l(x()),G=l(k()),Y=U("emulator"),K=class{constructor(e){this.options=e,d(this,"channel",null),d(this,"isConnected"),d(this,"url"),d(this,"fileSystemApi",null),d(this,"shellApi",null),d(this,"previewApi",null),(0,$.invariant)(this.options.iframe,'Failed to create a Nodebox: expected "iframe" argument to be a reference to an <iframe> element but got %j',this.options.iframe),this.url=this.options.runtimeUrl||"https://nodebox-runtime.codesandbox.io",this.isConnected=!1}async connect(){const{iframe:e,cdnUrl:t}=this.options;Y("[message-sender]: Connecting to node emulator...");const r=new z.DeferredPromise;this.url||r.reject(new Error("Nodebox URL is missing. Did you forget to provide it when creating this Nodebox instance?")),(0,$.invariant)(e.contentWindow,"Failed to create a MessageChannel with the Nodebox iframe: no content window found"),this.channel=new F(e.contentWindow);const n=new z.DeferredPromise;return e.setAttribute("src",this.url),e.addEventListener("load",(()=>{n.resolve()}),{once:!0}),e.addEventListener("error",(e=>{n.reject(e.error)}),{once:!0}),await n,Y("[message-sender]: IFrame loaded..."),await this.channel.handshake(),Y("[message-sender]: Handshake completed..."),this.channel.send("connect",{cdnUrl:t}),this.channel.on("runtime/ready",(()=>{r.resolve()})),r.then((()=>{Y("[message-sender]: Connected to runtime..."),this.isConnected=!0}))}get fs(){return(0,$.invariant)(this.isConnected,'Failed to access the File System API: consumer is not connected. Did you forget to run "connect()"?'),this.fileSystemApi||(this.fileSystemApi=new class{constructor(e){this.channel=e}async init(e){await this.channel.send("fs/init",{files:e})}async readFile(e,t){const r=await this.channel.send("fs/readFile",{path:e,encoding:t}).catch((t=>{throw new Error((0,J.format)('Failed to read file at path "%s"',e),{cause:t})}));return r?r.data:void 0}async writeFile(e,t,r){await this.channel.send("fs/writeFile",{path:e,content:t,encoding:r}).catch((t=>{throw new Error((0,J.format)('Failed to write file at path "%s"',e),{cause:t})}))}async watch(e,t,r){const n=(0,W.default)();return await this.channel.send("fs/watch",{watcherId:n,includes:e,excludes:t}),this.channel.on("fs/watch-event",(({data:e})=>{if(e.watcherId===n&&r){const t={...e};delete t.watcherId,r(t)}})),{dispose:()=>this.channel.send("fs/unwatch",{watcherId:n})}}}(this.channel)),this.fileSystemApi}get shell(){return(0,$.invariant)(this.isConnected,'Failed to access the Shell API: consumer is not connected. Did you forget to run "connect()"?'),this.shellApi||(this.shellApi=new class{constructor(e){this.channel=e}create(){return new class{constructor(e){this.channel=e,d(this,"id"),d(this,"state"),d(this,"stdout"),d(this,"stderr"),this.state="running",this.stdout=new H.Emitter,this.stderr=new H.Emitter,this.forwardStdEvents()}forwardStdEvents(){this.channel.on("worker/tty",(e=>{const{data:t}=e;if(t.workerId===this.id)switch(t.payload.type){case"out":this.stdout.emit("data",t.payload.data);break;case"err":this.stderr.emit("data",t.payload.data)}}))}async runCommand(e,t,r={}){(0,V.invariant)(!this.id,'Failed to run "runCommand" on a ShellProcess: there is already a process running.');const n=await this.channel.send("shell/runCommand",{command:e,args:t,options:r});return(0,V.invariant)(n,'Failed to run "runCommand" on a ShellProcess: was not able to retrieve a running process.'),this.id=n.id,this.state="running",n}async on(e,t){switch(e){case"progress":return void this.channel.on("worker/progress",(({data:e})=>{t(e.status)}));case"exit":return void this.channel.on("worker/exit",(({data:e})=>{e.workerId===this.id&&t(e.exitCode,e.error)}))}}async kill(){(0,V.invariant)(this.id,'Failed to run "kill" on a ShellProcess: there is no process running. Did you forget to run it?'),this.state="idle",await this.channel.send("shell/exit",{id:this.id}).catch((e=>{throw new Error((0,V.format)('Failed to kill shell with ID "%s"',this.id),{cause:e})})),this.id=void 0}}(this.channel)}}(this.channel)),this.shellApi}get preview(){return(0,$.invariant)(this.isConnected,'Failed to access the Preview API: consumer is not connected. Did you forget to run "connect()"?'),this.previewApi||(this.previewApi=new class{constructor(e){this.channel=e}async waitFor(e,t,r=1e4){const n=new G.DeferredPromise,o=setTimeout((()=>{n.reject()}),r),i=await this.channel.send("preview/get/info",e).catch((t=>{n.reject(new Error((0,q.format)('Failed to look up preview information for shell ID "%s" (port: %d)',e.sourceShellId,e.port)))})),a=i&&t(i);return a&&n.resolve({url:i.url,port:i.port,sourceShellId:i.sourceShellId}),this.channel.on("preview/port/ready",(({data:e})=>{!a&&t(e)&&n.resolve({url:e.url,port:e.port,sourceShellId:e.sourceShellId})})),n.finally((()=>{clearTimeout(o)}))}async getByShellId(e,t){return this.waitFor({sourceShellId:e},(t=>t.sourceShellId===e),t).catch((t=>{throw new Error((0,q.format)('Failed to get shell by ID "%s"',e),{cause:t})}))}async waitForPort(e,t){return this.waitFor({port:e},(t=>t.port===e),t).catch((t=>{throw new Error((0,q.format)("Failed to await port %d",e),{cause:t})}))}}(this.channel)),this.previewApi}},Z="INJECT_AND_INVOKE",X="PREVIEW_LOADED"},152:(e,t,r)=>{"use strict";var n=r(487),o=function(){function e(e,t,r){void 0===r&&(r={}),this.options=r,this.sandboxSetup=t,this.iframeSelector=e}return e.prototype.updateOptions=function(e){n.dequal(this.options,e)||(this.options=e,this.updateSandbox())},e.prototype.updateSandbox=function(e,t){throw void 0===e&&(e=this.sandboxSetup),Error("Method not implemented")},e.prototype.destroy=function(){throw Error("Method not implemented")},e.prototype.dispatch=function(e){throw Error("Method not implemented")},e.prototype.listen=function(e){throw Error("Method not implemented")},e}();t.SandpackClient=o},295:(e,t,r)=>{"use strict";var n=r(876),o=r(764),i=r(342),a=r(152),s=r(987);r(487);var u=function(e,t){return void 0===t&&(t="utf8"),"string"==typeof e?o.Buffer.from(e,t):e},c=function(e){return"string"==typeof e?e:"object"==typeof e&&"message"in e?e.message:n.createError("The server could not be reached. Make sure that the node script is running and that a port has been started.")},l=function(){function e(){this.listeners={},this.listenersCount=0,this.channelId=Math.floor(1e6*Math.random()),this.listeners=[]}return e.prototype.cleanup=function(){this.listeners={},this.listenersCount=0},e.prototype.dispatch=function(e){Object.values(this.listeners).forEach((function(t){return t(e)}))},e.prototype.listener=function(e){var t=this;if("function"!=typeof e)return function(){};var r=this.listenersCount;return this.listeners[r]=e,this.listenersCount++,function(){delete t.listeners[r]}},e}();function d(e,t){return n.__awaiter(this,void 0,void 0,(function(){var r,o,i;return n.__generator(this,(function(a){return r=e.contentWindow,n.nullthrows(r,"Failed to await preview iframe: no content window found"),o=0,[2,new Promise((function(r,a){var s=function(){var u,c,l=function(){clearTimeout(i),o=10,r(),e.removeEventListener("load",l)};o>=10?a(n.createError("Could not able to connect to preview.")):(null===(u=e.contentWindow)||void 0===u||u.location.replace("about:blank"),null===(c=e.contentWindow)||void 0===c||c.location.replace(t),i=setTimeout((function(){s(),e.removeEventListener("load",l)}),2e3),o+=1,e.addEventListener("load",l))};e.addEventListener("error",(function(){return a(new Error("Iframe error"))})),e.addEventListener("abort",(function(){return a(new Error("Aborted"))})),s()}))]}))}))}var f=[{code:function(){var e=window.history.__proto__,t=[],r=0,n=function(e){parent.postMessage({type:"urlchange",url:e,back:r>0,forward:r<t.length-1},"*")};Object.assign(window.history,{go:function(o){var i=r+o;if(i>=0&&i<=t.length-1){var a=t[r=i],s=a.url,u=a.state;e.replaceState.call(window.history,u,"",s);var c=document.location.href;n(c),window.dispatchEvent(new PopStateEvent("popstate",{state:u}))}},back:function(){window.history.go(-1)},forward:function(){window.history.go(1)},pushState:function(o,i,a){e.replaceState.call(window.history,o,i,a),function(e,n){t.splice(r+1),t.push({url:e,state:n}),r=t.length-1}(a,o),n(document.location.href)},replaceState:function(o,i,a){e.replaceState.call(window.history,o,i,a),t[r]={state:o,url:a},n(document.location.href)}}),window.addEventListener("message",(function(e){var t=e.data;"urlback"===t.type?history.back():"urlforward"===t.type?history.forward():"refresh"===t.type&&document.location.reload()}))}.toString(),id:"historyListener"},{code:'function consoleHook() {var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e={},n={};!function(t){t.__esModule=!0,t.default=["log","debug","info","warn","error","table","clear","time","timeEnd","count","assert","command","result"]}(n);var a,o={},i={};(a=i).__esModule=!0,a.default=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+"-"+Date.now()};var u={},s={__esModule:!0};s.update=s.state=void 0,s.update=function(t){s.state=t};var f={},c={};!function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)};r.__esModule=!0,r.initialState=void 0,r.initialState={timings:{},count:{}};var n=function(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()};r.default=function(t,a){var o,i,u;switch(void 0===t&&(t=r.initialState),a.type){case"COUNT":var s=t.count[a.name]||0;return e(e({},t),{count:e(e({},t.count),(o={},o[a.name]=s+1,o))});case"TIME_START":return e(e({},t),{timings:e(e({},t.timings),(i={},i[a.name]={start:n()},i))});case"TIME_END":var f=t.timings[a.name],c=n(),l=c-f.start;return e(e({},t),{timings:e(e({},t.timings),(u={},u[a.name]=e(e({},f),{end:c,time:l}),u))});default:return t}}}(c),function(r){var e=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var n=e(c),a=s;r.default=function(t){a.update(n.default(a.state,t))}}(f);var l={__esModule:!0};l.timeEnd=l.timeStart=l.count=void 0,l.count=function(t){return{type:"COUNT",name:t}},l.timeStart=function(t){return{type:"TIME_START",name:t}},l.timeEnd=function(t){return{type:"TIME_END",name:t}};var d=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};u.__esModule=!0,u.stop=u.start=void 0;var p=s,h=d(f),m=l;u.start=function(t){h.default(m.timeStart(t))},u.stop=function(t){var r=null===p.state||void 0===p.state?void 0:p.state.timings[t];return r&&!r.end?(h.default(m.timeEnd(t)),{method:"log",data:[t+": "+p.state.timings[t].time+"ms"]}):{method:"warn",data:["Timer \'"+t+"\' does not exist"]}};var y={},v=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};y.__esModule=!0,y.increment=void 0;var _=s,b=v(f),g=l;y.increment=function(t){return b.default(g.count(t)),{method:"log",data:[t+": "+_.state.count[t]]}};var M={},T=t&&t.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var o=arguments[r],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n};M.__esModule=!0,M.test=void 0,M.test=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return!t&&(0===r.length&&r.push("console.assert"),{method:"error",data:T(["Assertion failed:"],r)})},function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)},n=t&&t.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),a=t&&t.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),o=t&&t.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)"default"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&n(r,t,e);return a(r,t),r},s=t&&t.__spreadArrays||function(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),a=0;for(r=0;r<e;r++)for(var o=arguments[r],i=0,u=o.length;i<u;i++,a++)n[a]=o[i];return n},f=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var c=f(i),l=o(u),d=o(y),p=o(M);r.default=function(t,r,n){var a=n||c.default();switch(t){case"clear":return{method:t,id:a};case"count":return!!(o="string"==typeof r[0]?r[0]:"default")&&e(e({},d.increment(o)),{id:a});case"time":case"timeEnd":var o;return!!(o="string"==typeof r[0]?r[0]:"default")&&("time"===t?(l.start(o),!1):e(e({},l.stop(o)),{id:a}));case"assert":if(0!==r.length){var i=p.test.apply(p,s([r[0]],r.slice(1)));if(i)return e(e({},i),{id:a})}return!1;case"error":return{method:t,id:a,data:r.map((function(t){try{return t.stack||t}catch(r){return t}}))};default:return{method:t,id:a,data:r}}}}(o);var S={},O={};!function(t){var r;t.__esModule=!0,function(t){t[t.infinity=0]="infinity",t[t.minusInfinity=1]="minusInfinity",t[t.minusZero=2]="minusZero"}(r||(r={})),t.default={type:"Arithmetic",lookup:Number,shouldTransform:function(t,r){return"number"===t&&(r===1/0||r===-1/0||function(t){return 1/t==-1/0}(r))},toSerializable:function(t){return t===1/0?r.infinity:t===-1/0?r.minusInfinity:r.minusZero},fromSerializable:function(t){return t===r.infinity?1/0:t===r.minusInfinity?-1/0:t===r.minusZero?-0:t}}}(O);var w={};!function(t){t.__esModule=!0,t.default={type:"Function",lookup:Function,shouldTransform:function(t,r){return"function"==typeof r},toSerializable:function(t){var r="";try{r=t.toString().substring(r.indexOf("{")+1,r.lastIndexOf("}"))}catch(t){}return{name:t.name,body:r,proto:Object.getPrototypeOf(t).constructor.name}},fromSerializable:function(t){try{var r=function(){};return"string"==typeof t.name&&Object.defineProperty(r,"name",{value:t.name,writable:!1}),"string"==typeof t.body&&Object.defineProperty(r,"body",{value:t.body,writable:!1}),"string"==typeof t.proto&&(r.constructor={name:t.proto}),r}catch(r){return t}}}}(w);var A={};!function(t){var r;function e(t){for(var r={},e=0,n=t.attributes;e<n.length;e++){var a=n[e];r[a.name]=a.value}return r}t.__esModule=!0,t.default={type:"HTMLElement",shouldTransform:function(t,r){return r&&r.children&&"string"==typeof r.innerHTML&&"string"==typeof r.tagName},toSerializable:function(t){return{tagName:t.tagName.toLowerCase(),attributes:e(t),innerHTML:t.innerHTML}},fromSerializable:function(t){try{var e=(r||(r=document.implementation.createHTMLDocument("sandbox"))).createElement(t.tagName);e.innerHTML=t.innerHTML;for(var n=0,a=Object.keys(t.attributes);n<a.length;n++){var o=a[n];try{e.setAttribute(o,t.attributes[o])}catch(t){}}return e}catch(r){return t}}}}(A);var j={};!function(r){var e=t&&t.__assign||function(){return e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},e.apply(this,arguments)};r.__esModule=!0,r.default={type:"Map",shouldTransform:function(t,r){return r&&r.constructor&&"Map"===r.constructor.name},toSerializable:function(t){var r={};return t.forEach((function(t,e){var n="object"==typeof e?JSON.stringify(e):e;r[n]=t})),{name:"Map",body:r,proto:Object.getPrototypeOf(t).constructor.name}},fromSerializable:function(t){var r=t.body,n=e({},r);return"string"==typeof t.proto&&(n.constructor={name:t.proto}),n}}}(j);var z={};!function(t){t.__esModule=!0;var r="@t",e=/^#*@(t|r)$/,n=(0,eval)("this"),a="function"==typeof ArrayBuffer,o="function"==typeof Map,i="function"==typeof Set,u=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],s=Array.prototype.slice,f={serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)}},c=function(){function t(t,r){this.references=t,this.transforms=r,this.transformsMap=this._makeTransformsMap(),this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}return t._createRefMark=function(t){var r=Object.create(null);return r["@r"]=t,r},t.prototype._createCircularCandidate=function(t,r,e){this.circularCandidates.push(t),this.circularCandidatesDescrs.push({parent:r,key:e,refIdx:-1})},t.prototype._applyTransform=function(t,e,n,a){var o=Object.create(null),i=a.toSerializable(t);return"object"==typeof i&&this._createCircularCandidate(t,e,n),o[r]=a.type,o.data=this._handleValue((function(){return i}),e,n),o},t.prototype._handleArray=function(t){for(var r=[],e=function(e){r[e]=n._handleValue((function(){return t[e]}),r,e)},n=this,a=0;a<t.length;a++)e(a);return r},t.prototype._handlePlainObject=function(t){var r,n,a=Object.create(null),o=function(r){if(Reflect.has(t,r)){var n=e.test(r)?"#"+r:r;a[n]=i._handleValue((function(){return t[r]}),a,n)}},i=this;for(var u in t)o(u);var s=null===(n=null===(r=null==t?void 0:t.__proto__)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name;return s&&"Object"!==s&&(a.constructor={name:s}),a},t.prototype._handleObject=function(t,r,e){return this._createCircularCandidate(t,r,e),Array.isArray(t)?this._handleArray(t):this._handlePlainObject(t)},t.prototype._ensureCircularReference=function(r){var e=this.circularCandidates.indexOf(r);if(e>-1){var n=this.circularCandidatesDescrs[e];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),t._createRefMark(n.refIdx)}return null},t.prototype._handleValue=function(t,r,e){try{var n=t(),a=typeof n,o="object"===a&&null!==n;if(o){var i=this._ensureCircularReference(n);if(i)return i}var u=this._findTransform(a,n);return u?this._applyTransform(n,r,e,u):o?this._handleObject(n,r,e):n}catch(t){try{return this._handleValue((function(){return t instanceof Error?t:new Error(t)}),r,e)}catch(t){return null}}},t.prototype._makeTransformsMap=function(){if(o){var t=new Map;return this.transforms.forEach((function(r){r.lookup&&t.set(r.lookup,r)})),t}},t.prototype._findTransform=function(t,r){if(o&&r&&r.constructor&&(null==(a=this.transformsMap.get(r.constructor))?void 0:a.shouldTransform(t,r)))return a;for(var e=0,n=this.transforms;e<n.length;e++){var a;if((a=n[e]).shouldTransform(t,r))return a}},t.prototype.transform=function(){for(var r=this,e=[this._handleValue((function(){return r.references}),null,null)],n=0,a=this.circularCandidatesDescrs;n<a.length;n++){var o=a[n];o.refIdx>0&&(e[o.refIdx]=o.parent[o.key],o.parent[o.key]=t._createRefMark(o.refIdx))}return e},t}(),l=function(){function t(t,r){this.activeTransformsStack=[],this.visitedRefs=Object.create(null),this.references=t,this.transformMap=r}return t.prototype._handlePlainObject=function(t){var r=Object.create(null);for(var n in"constructor"in t&&(t.constructor&&"string"==typeof t.constructor.name||(t.constructor={name:"Object"})),t)t.hasOwnProperty(n)&&(this._handleValue(t[n],t,n),e.test(n)&&(r[n.substring(1)]=t[n],delete t[n]));for(var a in r)t[a]=r[a]},t.prototype._handleTransformedObject=function(t,e,n){var a=t[r],o=this.transformMap[a];if(!o)throw new Error("Can\'t find transform for \\""+a+\'" type.\');this.activeTransformsStack.push(t),this._handleValue(t.data,t,"data"),this.activeTransformsStack.pop(),e[n]=o.fromSerializable(t.data)},t.prototype._handleCircularSelfRefDuringTransform=function(t,r,e){var n=this.references;Object.defineProperty(r,e,{val:void 0,configurable:!0,enumerable:!0,get:function(){return void 0===this.val&&(this.val=n[t]),this.val},set:function(t){this.val=t}})},t.prototype._handleCircularRef=function(t,r,e){this.activeTransformsStack.includes(this.references[t])?this._handleCircularSelfRefDuringTransform(t,r,e):(this.visitedRefs[t]||(this.visitedRefs[t]=!0,this._handleValue(this.references[t],this.references,t)),r[e]=this.references[t])},t.prototype._handleValue=function(t,e,n){if("object"==typeof t&&null!==t){var a=t["@r"];if(void 0!==a)this._handleCircularRef(a,e,n);else if(t[r])this._handleTransformedObject(t,e,n);else if(Array.isArray(t))for(var o=0;o<t.length;o++)this._handleValue(t[o],t,o);else this._handlePlainObject(t)}},t.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]},t}(),d=[{type:"[[NaN]]",shouldTransform:function(t,r){return"number"===t&&isNaN(r)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(t){return"undefined"===t},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",lookup:Date,shouldTransform:function(t,r){return r instanceof Date},toSerializable:function(t){return t.getTime()},fromSerializable:function(t){var r=new Date;return r.setTime(t),r}},{type:"[[RegExp]]",lookup:RegExp,shouldTransform:function(t,r){return r instanceof RegExp},toSerializable:function(t){var r={src:t.source,flags:""};return t.globalThis&&(r.flags+="g"),t.ignoreCase&&(r.flags+="i"),t.multiline&&(r.flags+="m"),r},fromSerializable:function(t){return new RegExp(t.src,t.flags)}},{type:"[[Error]]",lookup:Error,shouldTransform:function(t,r){return r instanceof Error},toSerializable:function(t){var r,e;return t.stack||null===(e=(r=Error).captureStackTrace)||void 0===e||e.call(r,t),{name:t.name,message:t.message,stack:t.stack}},fromSerializable:function(t){var r=new(n[t.name]||Error)(t.message);return r.stack=t.stack,r}},{type:"[[ArrayBuffer]]",lookup:a&&ArrayBuffer,shouldTransform:function(t,r){return a&&r instanceof ArrayBuffer},toSerializable:function(t){var r=new Int8Array(t);return s.call(r)},fromSerializable:function(t){if(a){var r=new ArrayBuffer(t.length);return new Int8Array(r).set(t),r}return t}},{type:"[[TypedArray]]",shouldTransform:function(t,r){if(a)return ArrayBuffer.isView(r)&&!(r instanceof DataView);for(var e=0,o=u;e<o.length;e++){var i=o[e];if("function"==typeof n[i]&&r instanceof n[i])return!0}return!1},toSerializable:function(t){return{ctorName:t.constructor.name,arr:s.call(t)}},fromSerializable:function(t){return"function"==typeof n[t.ctorName]?new n[t.ctorName](t.arr):t.arr}},{type:"[[Map]]",lookup:o&&Map,shouldTransform:function(t,r){return o&&r instanceof Map},toSerializable:function(t){var r=[];return t.forEach((function(t,e){r.push(e),r.push(t)})),r},fromSerializable:function(t){if(o){for(var r=new Map,e=0;e<t.length;e+=2)r.set(t[e],t[e+1]);return r}for(var n=[],a=0;a<t.length;a+=2)n.push([t[e],t[e+1]]);return n}},{type:"[[Set]]",lookup:i&&Set,shouldTransform:function(t,r){return i&&r instanceof Set},toSerializable:function(t){var r=[];return t.forEach((function(t){r.push(t)})),r},fromSerializable:function(t){if(i){for(var r=new Set,e=0;e<t.length;e++)r.add(t[e]);return r}return t}}],p=function(){function t(t){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=t||f,this.addTransforms(d)}return t.prototype.addTransforms=function(t){for(var r=0,e=t=Array.isArray(t)?t:[t];r<e.length;r++){var n=e[r];if(this.transformsMap[n.type])throw new Error(\'Transform with type "\'+n.type+\'" was already added.\');this.transforms.push(n),this.transformsMap[n.type]=n}return this},t.prototype.removeTransforms=function(t){for(var r=0,e=t=Array.isArray(t)?t:[t];r<e.length;r++){var n=e[r],a=this.transforms.indexOf(n);a>-1&&this.transforms.splice(a,1),delete this.transformsMap[n.type]}return this},t.prototype.encode=function(t){var r=new c(t,this.transforms).transform();return this.serializer.serialize(r)},t.prototype.decode=function(t){var r=this.serializer.deserialize(t);return new l(r,this.transformsMap).transform()},t}();t.default=p}(z);var E=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};S.__esModule=!0,S.Decode=P=S.Encode=void 0;var k=E(O),C=E(w),D=E(A),N=E(j),R=E(z),I=[D.default,C.default,k.default,N.default],x=new R.default;x.addTransforms(I);var P=S.Encode=function(t){return JSON.parse(x.encode(t))};S.Decode=function(t){return x.decode(JSON.stringify(t))},function(r){var e=t&&t.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r.__esModule=!0;var a=e(n),i=e(o),u=S;r.default=function(t,r,e){void 0===e&&(e=!0);for(var n=t,o={pointers:{},src:{npm:"https://npmjs.com/package/console-feed",github:"https://github.com/samdenty99/console-feed"}},s=function(t){var a=n[t];n[t]=function(){a.apply(this,arguments);var n=[].slice.call(arguments);setTimeout((function(){var a=i.default(t,n);if(a){var o=a;e&&(o=u.Encode(a)),r(o,a)}}))},o.pointers[t]=a},f=0,c=a.default;f<c.length;f++)s(c[f]);return n.feed=o,n}}(e),r(e)(window.console,(function(t){var r=P(t);parent.postMessage({type:"console",codesandbox:!0,log:Array.isArray(r)?r[0]:r},"*")}));\n\n};',id:"consoleHook"}],h=function(e){function t(t,r,o){void 0===o&&(o={});var i=e.call(this,t,r,n.__assign(n.__assign({},o),{bundlerURL:o.bundlerURL}))||this;return i._modulesCache=new Map,i.emitter=new l,i.manageIframes(t),i.createNodebox(),i}return n.__extends(t,e),t.prototype.createNodebox=function(){this.emulator=new i.Nodebox({iframe:this.emulatorIframe,runtimeUrl:this.options.bundlerURL})},t.prototype.compile=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r;return n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,7,,8]),this.dispatch({type:"start",firstLoad:!0}),[4,this.emulator.connect()];case 1:return n.sent(),[4,this.emulator.fs.init(e)];case 2:return n.sent(),[4,this.globalListeners()];case 3:return n.sent(),[4,this.createShellProcessFromTask(e)];case 4:return t=n.sent().id,[4,this.createPreviewURLFromId(t)];case 5:return n.sent(),[4,this.setLocationURLIntoIFrame()];case 6:return n.sent(),this.dispatchDoneMessage(),[3,8];case 7:return r=n.sent(),this.dispatch({type:"action",action:"notification",notificationType:"error",title:c(r)}),this.dispatch({type:"done",compilatonError:!0}),[3,8];case 8:return[2]}}))}))},t.prototype.createShellProcessFromTask=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,i=this;return n.__generator(this,(function(a){switch(a.label){case 0:return u=e["/package.json"],t="string"==typeof u?u:o.Buffer.from(u).toString("utf-8"),this.emulatorCommand=function(e){var t,r={},o=["dev","start"];try{r=JSON.parse(e).scripts}catch(e){throw n.createError("Could not parse package.json file: "+e.message)}s.invariant(r,"Failed to start. Please provide a `start` or `dev` script on the package.json");for(var i=0;i<o.length;i++)if(o[i]in r){var a=r[o[i]],u=null===(t=a.match(/(\w+=\w+;)*\w+=\w+/g))||void 0===t?void 0:t.reduce((function(e,t){var r=t.split("="),n=r[0],o=r[1];return e[n]=o,e}),{}),c=a.replace(/(\w+=\w+;)*\w+=\w+/g,"").trim().split(" ");return[c[0],c.slice(1),{env:u}]}throw n.createError("Failed to start. Please provide a `start` or `dev` script on the package.json")}(t),this.emulatorShellProcess=this.emulator.shell.create(),[4,this.emulatorShellProcess.on("exit",(function(e){i.dispatch({type:"action",action:"notification",notificationType:"error",title:n.createError("Error: process.exit("+e+") called.")})}))];case 1:return a.sent(),[4,this.emulatorShellProcess.on("progress",(function(e){var t,r;"command_running"!==e.state&&"starting_command"!==e.state?i.dispatch({type:"shell/progress",data:e}):i.dispatch({type:"shell/progress",data:n.__assign(n.__assign({},e),{command:[null===(t=i.emulatorCommand)||void 0===t?void 0:t[0],null===(r=i.emulatorCommand)||void 0===r?void 0:r[1].join(" ")].join(" ")})})}))];case 2:return a.sent(),this.emulatorShellProcess.stdout.on("data",(function(e){i.dispatch({type:"stdout",payload:{data:e,type:"out"}})})),this.emulatorShellProcess.stderr.on("data",(function(e){i.dispatch({type:"stdout",payload:{data:e,type:"err"}})})),[4,(r=this.emulatorShellProcess).runCommand.apply(r,this.emulatorCommand)];case 3:return[2,a.sent()]}var u}))}))},t.prototype.createPreviewURLFromId=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.iframePreviewUrl=void 0,[4,this.emulator.preview.getByShellId(e)];case 1:return t=r.sent().url,this.iframePreviewUrl=t,[3,3];case 2:return r.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.manageIframes=function(e){var t,r,o;if("string"==typeof e){var i=document.querySelector(e);n.nullthrows(i,"The element '"+e+"' was not found"),this.iframe=document.createElement("iframe")}else this.iframe=e;r=this.iframe,o=this.options,r.style.border="0",r.style.width=o.width||"100%",r.style.height=o.height||"100%",r.style.overflow="hidden",r.allow="cross-origin-isolated",n.nullthrows(this.iframe.parentNode,"The given iframe does not have a parent."),this.emulatorIframe=document.createElement("iframe"),this.emulatorIframe.classList.add("sp-bridge-frame"),null===(t=this.iframe.parentNode)||void 0===t||t.appendChild(this.emulatorIframe)},t.prototype.setLocationURLIntoIFrame=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return this.iframePreviewUrl?[4,d(this.iframe,this.iframePreviewUrl)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.dispatchDoneMessage=function(){this.dispatch({type:"done",compilatonError:!1}),this.iframePreviewUrl&&this.dispatch({type:"urlchange",url:this.iframePreviewUrl,back:!1,forward:!1})},t.prototype.globalListeners=function(){return n.__awaiter(this,void 0,void 0,(function(){var e=this;return n.__generator(this,(function(t){switch(t.label){case 0:return window.addEventListener("message",(function(t){var r;t.data.type===i.PREVIEW_LOADED_MESSAGE_TYPE&&(r=e.iframe,f.forEach((function(e){var t,n=e.code,o={uid:e.id,type:i.INJECT_MESSAGE_TYPE,code:"exports.activate = "+n,scope:{}};null===(t=r.contentWindow)||void 0===t||t.postMessage(o,"*")}))),"urlchange"===t.data.type&&e.dispatch({type:"urlchange",url:t.data.url,back:t.data.back,forward:t.data.forward}),e.dispatch(t.data)})),[4,this.emulator.fs.watch(["*"],[".next","node_modules","build","dist","vendor",".config",".vuepress"],(function(t){return n.__awaiter(e,void 0,void 0,(function(){var e,r,o,i;return n.__generator(this,(function(n){switch(n.label){case 0:if(!t)return[2];e=t,n.label=1;case 1:switch(n.trys.push([1,9,,10]),e.type){case"change":case"create":return[3,2];case"remove":return[3,4];case"rename":return[3,5];case"close":return[3,7]}return[3,8];case 2:return[4,this.emulator.fs.readFile(e.path,"utf8")];case 3:return r=n.sent(),this.dispatch({type:"fs/change",path:e.path,content:r}),this._modulesCache.set(e.path,u(r)),[3,8];case 4:return this.dispatch({type:"fs/remove",path:e.path}),this._modulesCache.delete(e.path),[3,8];case 5:return this.dispatch({type:"fs/remove",path:e.oldPath}),this._modulesCache.delete(e.oldPath),[4,this.emulator.fs.readFile(e.newPath,"utf8")];case 6:return o=n.sent(),this.dispatch({type:"fs/change",path:e.newPath,content:o}),this._modulesCache.set(e.newPath,u(o)),[3,8];case 7:return[3,8];case 8:return[3,10];case 9:return i=n.sent(),this.dispatch({type:"action",action:"notification",notificationType:"error",title:c(i)}),[3,10];case 10:return[2]}}))}))}))];case 1:return t.sent(),[2]}}))}))},t.prototype.restartShellProcess=function(){var e,t;return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(r){switch(r.label){case 0:return this.emulatorShellProcess&&this.emulatorCommand?(this.dispatch({type:"start",firstLoad:!0}),[4,this.emulatorShellProcess.kill()]):[3,3];case 1:return r.sent(),null===(t=null===(e=this.iframe)||void 0===e?void 0:e.contentWindow)||void 0===t||t.location.replace("about:blank"),this.createNodebox(),[4,this.compile(Object.fromEntries(this._modulesCache))];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.updateSandbox=function(e){var t,r,n=this,i=(r=e.files,Object.entries(r).reduce((function(e,t){var r=t[0],n=t[1];return e[r]=u(n.code),e}),{}));"running"!==(null===(t=this.emulatorShellProcess)||void 0===t?void 0:t.state)?(this.dispatch({codesandbox:!0,modules:i,template:e.template,type:"compile"}),Object.entries(i).forEach((function(e){var t=e[0],r=e[1];n._modulesCache.set(t,u(r))}))):Object.entries(i).forEach((function(e){var t=e[0],r=e[1];n._modulesCache.get(t)&&0===o.Buffer.compare(r,n._modulesCache.get(t))||n.emulator.fs.writeFile(t,r)}))},t.prototype.dispatch=function(e){var t,r;return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:switch(e.type){case"compile":return[3,1];case"refresh":return[3,2];case"urlback":case"urlforward":return[3,4];case"shell/restart":return[3,5];case"shell/openPreview":return[3,6]}return[3,7];case 1:return this.compile(e.modules),[3,8];case 2:return[4,this.setLocationURLIntoIFrame()];case 3:return n.sent(),[3,8];case 4:return null===(r=null===(t=this.iframe)||void 0===t?void 0:t.contentWindow)||void 0===r||r.postMessage(e,"*"),[3,8];case 5:return this.restartShellProcess(),[3,8];case 6:return window.open(this.iframePreviewUrl,"_blank"),[3,8];case 7:this.emitter.dispatch(e),n.label=8;case 8:return[2]}}))}))},t.prototype.listen=function(e){return this.emitter.listener(e)},t.prototype.destroy=function(){this.emitter.cleanup()},t}(a.SandpackClient);t.SandpackNode=h},232:(e,t,r)=>{"use strict";var n=r(876),o=r(487),i=r(152);r(987);var a=function(){function e(e,t,r){var o=this;this.type=e,this.handleMessage=t,this.protocol=r,this._disposeMessageListener=this.protocol.channelListen((function(e){return n.__awaiter(o,void 0,void 0,(function(){var t,r,o,i;return n.__generator(this,(function(n){switch(n.label){case 0:if(e.type!==this.getTypeId()||!e.method)return[3,4];t=e,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.handleMessage(t)];case 2:return r=n.sent(),i={type:this.getTypeId(),msgId:t.msgId,result:r},this.protocol.dispatch(i),[3,4];case 3:return o=n.sent(),i={type:this.getTypeId(),msgId:t.msgId,error:{message:o.message}},this.protocol.dispatch(i),[3,4];case 4:return[2]}}))}))}))}return e.prototype.getTypeId=function(){return"protocol-"+this.type},e.prototype.dispose=function(){this._disposeMessageListener()},e}(),s=function(){function e(e,t){this.globalListeners={},this.globalListenersCount=0,this.channelListeners={},this.channelListenersCount=0,this.channelId=Math.floor(1e6*Math.random()),this.frameWindow=e.contentWindow,this.origin=t,this.globalListeners=[],this.channelListeners=[],this.eventListener=this.eventListener.bind(this),"undefined"!=typeof window&&window.addEventListener("message",this.eventListener)}return e.prototype.cleanup=function(){window.removeEventListener("message",this.eventListener),this.globalListeners={},this.channelListeners={},this.globalListenersCount=0,this.channelListenersCount=0},e.prototype.register=function(){this.frameWindow&&this.frameWindow.postMessage({type:"register-frame",origin:document.location.origin,id:this.channelId},this.origin)},e.prototype.dispatch=function(e){this.frameWindow&&this.frameWindow.postMessage(n.__assign({$id:this.channelId,codesandbox:!0},e),this.origin)},e.prototype.globalListen=function(e){var t=this;if("function"!=typeof e)return function(){};var r=this.globalListenersCount;return this.globalListeners[r]=e,this.globalListenersCount++,function(){delete t.globalListeners[r]}},e.prototype.channelListen=function(e){var t=this;if("function"!=typeof e)return function(){};var r=this.channelListenersCount;return this.channelListeners[r]=e,this.channelListenersCount++,function(){delete t.channelListeners[r]}},e.prototype.eventListener=function(e){if(e.source===this.frameWindow){var t=e.data;t.codesandbox&&(Object.values(this.globalListeners).forEach((function(e){return e(t)})),t.$id===this.channelId&&Object.values(this.channelListeners).forEach((function(e){return e(t)})))}},e}();function u(e,t){if(!e)return"static";var r=e.dependencies,o=void 0===r?{}:r,i=e.devDependencies,a=void 0===i?{}:i,s=n.__spreadArray(n.__spreadArray([],Object.keys(o),!0),Object.keys(a),!0),u=Object.keys(t),c=["@adonisjs/framework","@adonisjs/core"];if(s.some((function(e){return c.indexOf(e)>-1})))return"adonis";var l=["nuxt","nuxt-edge","nuxt-ts","nuxt-ts-edge","nuxt3"];if(s.some((function(e){return l.indexOf(e)>-1})))return"nuxt";if(s.indexOf("next")>-1)return"next";var d=["apollo-server","apollo-server-express","apollo-server-hapi","apollo-server-koa","apollo-server-lambda","apollo-server-micro"];if(s.some((function(e){return d.indexOf(e)>-1})))return"apollo";if(s.indexOf("mdx-deck")>-1)return"mdx-deck";if(s.indexOf("gridsome")>-1)return"gridsome";if(s.indexOf("vuepress")>-1)return"vuepress";if(s.indexOf("ember-cli")>-1)return"ember";if(s.indexOf("sapper")>-1)return"sapper";if(s.indexOf("gatsby")>-1)return"gatsby";if(s.indexOf("quasar")>-1)return"quasar";if(s.indexOf("@docusaurus/core")>-1)return"docusaurus";if(s.indexOf("remix")>-1)return"remix";if(s.indexOf("astro")>-1)return"node";if(u.some((function(e){return e.endsWith(".re")})))return"reason";var f=["parcel-bundler","parcel"];if(s.some((function(e){return f.indexOf(e)>-1})))return"parcel";var h=["@dojo/core","@dojo/framework"];if(s.some((function(e){return h.indexOf(e)>-1})))return"@dojo/cli-create-app";if(s.indexOf("@nestjs/core")>-1||s.indexOf("@nestjs/common")>-1)return"nest";if(s.indexOf("react-styleguidist")>-1)return"styleguidist";if(s.indexOf("react-scripts")>-1)return"create-react-app";if(s.indexOf("react-scripts-ts")>-1)return"create-react-app-typescript";if(s.indexOf("@angular/core")>-1)return"angular-cli";if(s.indexOf("preact-cli")>-1)return"preact-cli";if(s.indexOf("@sveltech/routify")>-1||s.indexOf("@roxi/routify")>-1)return"node";if(s.indexOf("vite")>-1)return"node";if(s.indexOf("@frontity/core")>-1)return"node";if(s.indexOf("svelte")>-1)return"svelte";if(s.indexOf("vue")>-1)return"vue-cli";if(s.indexOf("cx")>-1)return"cxjs";var p=["express","koa","nodemon","ts-node","@tensorflow/tfjs-node","webpack-dev-server","snowpack"];return s.some((function(e){return p.indexOf(e)>-1}))||Object.keys(o).length>=50?"node":void 0}var c="https://"+(null==="2.0.21"?void 0:"2.0.21".replace(/\./g,"-"))+"-sandpack.codesandbox.io/",l=function(e){function t(t,r,o){void 0===o&&(o={});var i=e.call(this,t,r,o)||this;if(i.getTranspilerContext=function(){return new Promise((function(e){var t=i.listen((function(r){"transpiler-context"===r.type&&(e(r.data),t())}));i.dispatch({type:"get-transpiler-context"})}))},i.bundlerURL=o.bundlerURL||c,i.bundlerState=void 0,i.errors=[],i.status="initializing","string"==typeof t){i.selector=t;var u=document.querySelector(t);n.nullthrows(u,"The element '"+t+"' was not found"),i.element=u,i.iframe=document.createElement("iframe"),i.initializeElement()}else i.element=t,i.iframe=t;return i.iframe.getAttribute("sandbox")||(i.iframe.setAttribute("sandbox","allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"),i.iframe.setAttribute("allow","accelerometer; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi;")),i.setLocationURLIntoIFrame(),i.iframeProtocol=new s(i.iframe,i.bundlerURL),i.unsubscribeGlobalListener=i.iframeProtocol.globalListen((function(e){"initialized"===e.type&&i.iframe.contentWindow&&(i.iframeProtocol.register(),i.options.fileResolver&&(i.fileResolverProtocol=new a("fs",(function(e){return n.__awaiter(i,void 0,void 0,(function(){return n.__generator(this,(function(t){if("isFile"===e.method)return[2,this.options.fileResolver.isFile(e.params[0])];if("readFile"===e.method)return[2,this.options.fileResolver.readFile(e.params[0])];throw new Error("Method not supported")}))}))}),i.iframeProtocol)),i.updateSandbox(i.sandboxSetup,!0))})),i.unsubscribeChannelListener=i.iframeProtocol.channelListen((function(e){switch(e.type){case"start":i.errors=[];break;case"status":i.status=e.status;break;case"action":"show-error"===e.action&&(i.errors=n.__spreadArray(n.__spreadArray([],i.errors,!0),[n.extractErrorDetails(e)],!1));break;case"state":i.bundlerState=e.state}})),i}return n.__extends(t,e),t.prototype.setLocationURLIntoIFrame=function(){var e,t=this.options.startRoute?new URL(this.options.startRoute,this.bundlerURL).toString():this.bundlerURL;null===(e=this.iframe.contentWindow)||void 0===e||e.location.replace(t),this.iframe.src=t},t.prototype.destroy=function(){this.unsubscribeChannelListener(),this.unsubscribeGlobalListener(),this.iframeProtocol.cleanup()},t.prototype.updateOptions=function(e){o.dequal(this.options,e)||(this.options=e,this.updateSandbox())},t.prototype.updateSandbox=function(e,t){var r,o,i,a;void 0===e&&(e=this.sandboxSetup),this.sandboxSetup=n.__assign(n.__assign({},this.sandboxSetup),e);var s=this.getFiles(),c=Object.keys(s).reduce((function(e,t){var r;return n.__assign(n.__assign({},e),((r={})[t]={code:s[t].code,path:t},r))}),{}),l=JSON.parse(n.createPackageJSON(this.sandboxSetup.dependencies,this.sandboxSetup.devDependencies,this.sandboxSetup.entry));try{l=JSON.parse(s["/package.json"].code)}catch(e){console.error(n.createError("could not parse package.json file: "+e.message))}var d=Object.keys(s).reduce((function(e,t){var r;return n.__assign(n.__assign({},e),((r={})[t]={content:s[t].code,path:t},r))}),{});this.dispatch({type:"compile",codesandbox:!0,version:3,isInitializationCompile:t,modules:c,reactDevTools:this.options.reactDevTools,externalResources:this.options.externalResources||[],hasFileResolver:Boolean(this.options.fileResolver),disableDependencyPreprocessing:this.sandboxSetup.disableDependencyPreprocessing,template:this.sandboxSetup.template||u(l,d),showOpenInCodeSandbox:null===(r=this.options.showOpenInCodeSandbox)||void 0===r||r,showErrorScreen:null===(o=this.options.showErrorScreen)||void 0===o||o,showLoadingScreen:null===(i=this.options.showLoadingScreen)||void 0===i||i,skipEval:this.options.skipEval||!1,clearConsoleDisabled:!this.options.clearConsoleOnFirstCompile,logLevel:null!==(a=this.options.logLevel)&&void 0!==a?a:n.SandpackLogLevel.Info,customNpmRegistries:this.options.customNpmRegistries})},t.prototype.dispatch=function(e){"refresh"===e.type&&this.setLocationURLIntoIFrame(),this.iframeProtocol.dispatch(e)},t.prototype.listen=function(e){return this.iframeProtocol.channelListen(e)},t.prototype.getCodeSandboxURL=function(){var e=this.getFiles(),t=Object.keys(e).reduce((function(t,r){var o;return n.__assign(n.__assign({},t),((o={})[r.replace("/","")]={content:e[r].code,isBinary:!1},o))}),{});return fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",body:JSON.stringify({files:t}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return{sandboxId:e.sandbox_id,editorUrl:"https://codesandbox.io/s/"+e.sandbox_id,embedUrl:"https://codesandbox.io/embed/"+e.sandbox_id}}))},t.prototype.getFiles=function(){var e=this.sandboxSetup;return void 0===e.files["/package.json"]?n.addPackageJSONIfNeeded(e.files,e.dependencies,e.devDependencies,e.entry):this.sandboxSetup.files},t.prototype.initializeElement=function(){this.iframe.style.border="0",this.iframe.style.width=this.options.width||"100%",this.iframe.style.height=this.options.height||"100%",this.iframe.style.overflow="hidden",n.nullthrows(this.element.parentNode,"The given iframe does not have a parent."),this.element.parentNode.replaceChild(this.iframe,this.element)},t}(i.SandpackClient);t.SandpackRuntime=l},515:(e,t,r)=>{"use strict";var n=r(876);r(987),Object.defineProperty(t,"SandpackLogLevel",{enumerable:!0,get:function(){return n.SandpackLogLevel}}),t.addPackageJSONIfNeeded=n.addPackageJSONIfNeeded,t.createError=n.createError,t.createPackageJSON=n.createPackageJSON,t.extractErrorDetails=n.extractErrorDetails,t.normalizePath=n.normalizePath,t.nullthrows=n.nullthrows,t.loadSandpackClient=function(e,t,o){var i;return void 0===o&&(o={}),n.__awaiter(this,void 0,void 0,(function(){var a;return n.__generator(this,(function(n){switch(n.label){case 0:return"node"!==(null!==(i=t.template)&&void 0!==i?i:"parcel")?[3,2]:[4,Promise.resolve().then((function(){return r(295)})).then((function(e){return e.SandpackNode}))];case 1:return a=n.sent(),[3,4];case 2:return[4,Promise.resolve().then((function(){return r(232)})).then((function(e){return e.SandpackRuntime}))];case 3:a=n.sent(),n.label=4;case 4:return[2,new a(e,t,o)]}}))}))}},876:(e,t,r)=>{"use strict";var n=r(987),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};t.__assign=function(){return t.__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.__assign.apply(this,arguments)};var i=function(e){return"[sandpack-client]: "+e};function a(e,t){return void 0===t&&(t="Value is nullish"),n.invariant(null!=e,i(t)),e}var s='"entry" was not specified - provide either a package.json with the "main" field or an "entry" value';function u(e,t,r){return void 0===e&&(e={}),void 0===t&&(t={}),void 0===r&&(r="/index.js"),JSON.stringify({name:"sandpack-project",main:r,dependencies:e,devDependencies:t},null,2)}var c,l=function(e){return"string"==typeof e?e.startsWith("/")?e:"/"+e:Array.isArray(e)?e.map((function(e){return e.startsWith("/")?e:"/"+e})):"object"==typeof e&&null!==e?Object.entries(e).reduce((function(e,t){var r=t[0],n=t[1];return e[r.startsWith("/")?r:"/"+r]=n,e}),{}):null};t.SandpackLogLevel=void 0,(c=t.SandpackLogLevel||(t.SandpackLogLevel={}))[c.None=0]="None",c[c.Error=10]="Error",c[c.Warning=20]="Warning",c[c.Info=30]="Info",c[c.Debug=40]="Debug",t.__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},t.__extends=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},t.__generator=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},t.__spreadArray=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},t.addPackageJSONIfNeeded=function(e,r,n,o){var i,c,d=l(e),f=d["/package.json"];if(!f)return a(r,'"dependencies" was not specified - provide either a package.json or a "dependencies" value'),a(o,s),d["/package.json"]={code:u(r,n,o)},d;if(f){var h=JSON.parse(f.code);a(!(!r&&!h.dependencies),s),r&&(h.dependencies=t.__assign(t.__assign({},null!==(i=h.dependencies)&&void 0!==i?i:{}),null!=r?r:{})),n&&(h.devDependencies=t.__assign(t.__assign({},null!==(c=h.devDependencies)&&void 0!==c?c:{}),null!=n?n:{})),o&&(h.main=o),d["/package.json"]={code:JSON.stringify(h,null,2)}}return d},t.createError=i,t.createPackageJSON=u,t.extractErrorDetails=function(e){if("SyntaxError"===e.title)return{title:e.title,path:e.path,message:e.message,line:e.line,column:e.column};var t=function(e){if(e)return e.find((function(e){return!!e._originalFileName}))}(e.payload.frames);if(!t)return{message:e.message};var r,n,o,i=(n=(r=t)._originalScriptCode[r._originalScriptCode.length-1].lineNumber.toString().length,o=2+n+3+r._originalColumnNumber,r._originalScriptCode.reduce((function(e,t){var r=t.highlight?">":" ",i=t.lineNumber.toString().length===n?""+t.lineNumber:" "+t.lineNumber,a=t.highlight?"\n"+" ".repeat(o)+"^":"";return e+"\n"+r+" "+i+" | "+t.content+a}),"")),a=function(e){return e?" ("+e._originalLineNumber+":"+e._originalColumnNumber+")":""}(t);return{message:function(e,t,r,n){return e+": "+t+r+"\n"+n}(t._originalFileName,e.message,a,i),title:e.title,path:t._originalFileName,line:t._originalLineNumber,column:t._originalColumnNumber}},t.normalizePath=l,t.nullthrows=a},742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=u(e),a=i[0],s=i[1],c=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),l=0,d=s>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,u=n-o;s<u;s+=a)i.push(c(e,s,s+a>u?u:s+a));return 1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=i.length;a<s;++a)r[a]=i[a],n[i.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},764:(e,t,r)=>{"use strict";const n=r(742),o=r(645),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=s(r);const o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const o=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),s(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(o)return n?-1:H(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,o){let i,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){let n=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===u)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){let r=!0;for(let n=0;n<u;n++)if(c(e,i+n)!==c(t,n)){r=!1;break}if(r)return i}return-1}function w(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(K(n))return a;e[r+a]=n}return a}function S(e,t,r,n){return G(H(t,e.length-r),e,r,n)}function _(e,t,r,n){return G(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return G(q(t),e,r,n)}function E(e,t,r,n){return G(function(e,t){let r,n,o;const i=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,a=t>239?4:t>223?3:t>191?2:1;if(o+a<=r){let r,n,s,u;switch(a){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(i=u));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:r=e[o+1],n=e[o+2],s=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(e){const t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=A));return r}(n)}t.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))o+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,o){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(i,a),c=this.slice(n,o),l=e.slice(t,r);for(let e=0;e<s;++e)if(c[e]!==l[e]){i=c[e],a=l[e];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function C(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function I(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function T(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=t;n<r;++n)o+=Z[e[n]];return o}function j(e,t,r){const n=e.slice(t,r);let o="";for(let e=0;e<n.length-1;e+=2)o+=String.fromCharCode(n[e]+256*n[e+1]);return o}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n,o){z(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function B(e,t,r,n,o){z(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function N(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,i){return t=+t,r>>>=0,i||N(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function R(e,t,r,n,i){return t=+t,r>>>=0,i||N(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||J(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||J(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||J(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||J(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||P(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||P(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}let o=0,i=1,a=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return R(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return R(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=u.isBuffer(e)?e:u.from(e,n),a=i.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%a]}return this};const D={};function F(e,t,r){D[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function $(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function z(e,t,r,n,o,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new D.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||J(t,e.length-(r+1))}(n,o,i)}function W(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function J(e,t,r){if(Math.floor(e)!==e)throw W(e,r),new D.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=$(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=$(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},487:(e,t)=>{var r=Object.prototype.hasOwnProperty;function n(e,t,r){for(r of e.keys())if(o(r,t))return r}function o(e,t){var i,a,s;if(e===t)return!0;if(e&&t&&(i=e.constructor)===t.constructor){if(i===Date)return e.getTime()===t.getTime();if(i===RegExp)return e.toString()===t.toString();if(i===Array){if((a=e.length)===t.length)for(;a--&&o(e[a],t[a]););return-1===a}if(i===Set){if(e.size!==t.size)return!1;for(a of e){if((s=a)&&"object"==typeof s&&!(s=n(t,s)))return!1;if(!t.has(s))return!1}return!0}if(i===Map){if(e.size!==t.size)return!1;for(a of e){if((s=a[0])&&"object"==typeof s&&!(s=n(t,s)))return!1;if(!o(a[1],t.get(s)))return!1}return!0}if(i===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(i===DataView){if((a=e.byteLength)===t.byteLength)for(;a--&&e.getInt8(a)===t.getInt8(a););return-1===a}if(ArrayBuffer.isView(e)){if((a=e.byteLength)===t.byteLength)for(;a--&&e[a]===t[a];);return-1===a}if(!i||"object"==typeof e){for(i in a=0,e){if(r.call(e,i)&&++a&&!r.call(t,i))return!1;if(!(i in t)||!o(e[i],t[i]))return!1}return Object.keys(t).length===a}}return e!=e&&t!=t}t.dequal=o},645:(e,t)=>{t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,d=r?o-1:0,f=r?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+e[t+d],d+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=c}return(h?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*u-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[r+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[r+h]=255&a,h+=p,a/=256,c-=8);e[r+h-p]|=128*m}},602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.format=void 0;var r=/(%?)(%([sdjo]))/g;function n(e,t){switch(t){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":if("string"==typeof e)return e;var r=JSON.stringify(e);return"{}"===r||"[]"===r||/^\[object .+?\]$/.test(r)?e:r}}t.format=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(0===t.length)return e;var i=0,a=e.replace(r,(function(e,r,o,a){var s=n(t[i],a);return r?e:(i++,s)}));return i<t.length&&(a+=" "+t.slice(i).join(" ")),a.replace(/%{2,2}/g,"%")}},987:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(413),t),o(r(602),t)},413:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.invariant=t.createInvariantWith=t.InvariantError=void 0;var a=r(602);function s(e){if(e.stack){var t=e.stack.split("\n");t.splice(1,2),e.stack=t.join("\n")}}var u=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=e.call(this,t)||this;return o.message=t,o.name="Invariant Violation",o.message=a.format.apply(void 0,i([t],r)),s(o),o}return o(t,e),t}(Error);function c(e){return function(t,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!t){var u=a.format.apply(void 0,i([r],n)),c=!!e.prototype.name,l=c?new e(u):e(u);throw s(l),l}}}t.InvariantError=u,t.createInvariantWith=c,t.invariant=c(u),t.invariant.as=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return c(e).apply(void 0,t)}},191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SNBComponentSandboxEngine=t.SNBSandboxMessageStatus=void 0;const n=r(515),o=r(687),i=r(20),a=r(969),s=r(633),u=r(339);var c;!function(e){e.unknown="unknown",e.initializing="initializing",e.installingDependencies="installingDependencies",e.transpiling="transpiling",e.evaluating="evaluating",e.done="done",e.error="error"}(c=t.SNBSandboxMessageStatus||(t.SNBSandboxMessageStatus={})),t.SNBComponentSandboxEngine=class{constructor(){this.updateSandboxCodeDebounced=this.debounce(((e,t,r)=>this.updateSandboxCodeInternal(e,t,r))),this.trackedSandboxes=new Map,this.trackedConfigurations=new Map,this.trackedInitialStates=new Map}setObserver(e){this.listener=e}async getSessionAuthorizationToken(e){try{let t=await fetch(e,{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"}}),r=await t.json();const n=null==r?void 0:r.accessToken;return"string"==typeof n?n:null}catch(e){return null}}async buildSandboxesSessionAuthorized(e,t){let r=await this.getSessionAuthorizationToken(t);this.buildSandboxesTokenAuthorized(e,r)}async buildSandboxesTokenAuthorized(e,t){for(let r of e)this.buildSandboxWithPageTarget(r,t)}async buildSandboxesAnonymous(e){for(let t of e)this.buildSandboxWithPageTarget(t,null)}getSandboxTargetsStartingWith(e){const t=`[id^="${e}"]`;var r=document.querySelectorAll(t);return Array.from(r).map((e=>e.id))}getSandboxTargetsEndingWith(e){const t=`[id$="${e}]`;var r=document.querySelectorAll(t);return Array.from(r).map((e=>e.id))}async buildSandboxWithPageTarget(e,t){try{if(this.trackedSandboxes.get(e))throw new Error(`Sandbox for id ${e} was already created. You can only create one tracked sandbox per target`);let r=document.querySelector(`#${e}`);if(!r)throw new Error(`Can't build sandbox with target ${e} as there is no such target in the current context`);if("div"!==r.nodeName.toLowerCase()&&"iframe"!==r.nodeName.toLowerCase())throw new Error("Sandbox can only be created on element types of div or iframe (div is preferred)");let o=this.validateConstructDataFromElement(r),i=[];o.decodedConfiguration.registry&&(i=[{enabledScopes:o.decodedConfiguration.registry.enabledScopes,limitToScopes:!0,registryUrl:o.decodedConfiguration.registry.proxyUrl,proxyEnabled:!1,registryAuthToken:null!=t?t:void 0}]);let a={showErrorScreen:!0,showLoadingScreen:!1,showOpenInCodeSandbox:!0,customNpmRegistries:i},s=await n.loadSandpackClient(`#${e}`,o.payload,a);this.trackedSandboxes.set(e,s),this.trackedConfigurations.set(e,o.decodedConfiguration),this.trackedInitialStates.set(e,o.decodedConfiguration.files),this.listener&&s.listen((t=>{let r,n=c.unknown;switch(t.type){case"start":n=c.initializing;break;case"status":switch(t.status){case"evaluating":n=c.evaluating;break;case"installing-dependencies":n=c.installingDependencies;break;case"transpiling":n=c.transpiling}break;case"success":n=c.done;break;case"action":"show-error"===t.action&&(n=c.error,r=t.message)}n!==c.unknown&&this.listener({details:t,status:n,sandboxId:e,error:r})}))}catch(t){this.listener&&this.listener({error:t.message,status:c.error,sandboxId:e})}}updateSandbox(e,t){if(!this.trackedSandboxes.get(e))throw new Error(`Sandbox ${e} can't be updated because it wasn't created yet`);let r=this.trackedSandboxes.get(e),n=this.validateConstructDataFromEncodedData(t);r.updateSandbox(n.payload),this.trackedConfigurations.set(e,n.decodedConfiguration)}getSandboxCode(e,t){if(!this.trackedSandboxes.get(e)||!this.trackedConfigurations.get(e))throw new Error(`Can't get sandbox code for sandbox ${e} because it wasn't created yet`);let r=this.trackedConfigurations.get(e);if(!r.files||!r.files.hasOwnProperty(t))throw new Error(`Can't get sandbox code for sandbox ${e} because incorrect file key ${t} was provided. This key is not supported by ${r.type} bundler.`);return r.files[t]}getCodeForSandboxId(e,t){if(!this.trackedConfigurations.get(e))throw new Error(`Unknown code sandbox for id ${e}`);let r=this.trackedConfigurations.get(e);if(!r.files||!r.files.hasOwnProperty(t))throw new Error(`Can't get sandbox code for sandbox ${e} because incorrect file key ${t} was provided. This key is not supported by ${r.type} bundler.`);return r.files[t]}updateSandboxCode(e,t){this.updateSandboxCodeDebounced(e,t)}updateSandboxCodeInternal(e,t,r){if(!this.trackedSandboxes.get(e)||!this.trackedConfigurations.get(e))throw new Error(`Sandbox ${e} can't be updated because it wasn't created yet`);let n=this.trackedSandboxes.get(e),o=this.trackedConfigurations.get(e);if(!o.files||!o.files.hasOwnProperty(r))throw new Error(`Sandbox ${e} can't be updated because incorrect file key ${r} was provided. This key is not supported by ${o.type} bundler.`);o.files[r]=t;let i=this.createBundledData(o);n.updateSandbox(i),this.trackedConfigurations.set(e,o)}debounce(e,t=300){let r;return(...n)=>{clearTimeout(r),r=setTimeout((()=>{e.apply(this,n)}),t)}}async openInSandbox(e){if(!this.trackedSandboxes.get(e)||!this.trackedConfigurations.get(e))throw new Error(`Sandbox ${e} can't be updated because it wasn't created yet`);let t=this.trackedSandboxes.get(e),r=await t.getCodeSandboxURL();return window.open(r.editorUrl,"_blank"),r.editorUrl}createBundledData(e){var t,r;let n;switch(e.type){case o.SandboxMode.react:n=new s.SNBReactBundler(e.files,null!==(t=e.visual)&&void 0!==t?t:{});break;case o.SandboxMode.angular:n=new i.SNBAngularBundler(e.files,null!==(r=e.visual)&&void 0!==r?r:{});break;default:throw new Error(`Unsupported bundler type ${e.type}`)}return{files:n.buildSandboxPayload(),template:"esm-react"}}resetSandboxToInitial(e){if(!this.trackedConfigurations.get(e))throw new Error(`Unknown code sandbox for id ${e}`);let t=this.trackedInitialStates.get(e),r=this.trackedSandboxes.get(e),n=this.trackedConfigurations.get(e);n.files=t;let o=this.createBundledData(n);r.updateSandbox(o),this.trackedConfigurations.set(e,n)}encodeSandboxData(e,t,r,n){var o,i;let s=a.SandboxContentAlignment.center;if(r.alignment)switch(r.alignment){case"left":s=a.SandboxContentAlignment.start;break;case"center":s=a.SandboxContentAlignment.center;break;case"right":s=a.SandboxContentAlignment.end}let c={type:e,files:t,visual:{horizontalAlignment:s,verticalAlignment:a.SandboxContentAlignment.center,backgroundHex:null!==(o=r.backgroundColor)&&void 0!==o?o:void 0,padding:null!==(i=r.padding)&&void 0!==i?i:void 0,showCodeSandboxButton:!1},registry:n};return console.log(c),u.btoaUnicode(JSON.stringify(c))}setSandboxDataBeforeLoad(e,t){let r=document.querySelector(`#${e}`);if(!r)throw new Error("Can't inject sandbox data to target. This usually means that you are trying to update sandbox that was already created - this is no-op, use updateSandbox instead.");r.setAttribute("sn-sandbox-data",t)}validateConstructDataFromElement(e){let t=e.getAttribute("sn-sandbox-data");if(!t||0===t.length)throw new Error("Sandbox doesn't provide any valid data");return this.validateConstructDataFromEncodedData(t)}validateConstructDataFromEncodedData(e){let t;try{const r=u.atobUnicode(e);t=JSON.parse(r)}catch(e){throw new Error("Unable to decode sandbox data: Provided sandbox data corrupted")}return this.validateFilesFromEncodedData(t.type,t.files),{payload:this.createBundledData(t),decodedConfiguration:t}}validateFilesFromEncodedData(e,t){let r;switch(e){case o.SandboxMode.angular:r=i.SNBAngularBundlerFileKeys;break;case o.SandboxMode.react:r=s.SNBReactBundlerFileKeys;break;default:throw new Error(`Unable to decode sandbox data: Unsupported platform ${e}`)}for(let e of Object.values(r))if(!t.hasOwnProperty(e))throw new Error(`Unable to decode sandbox data: Provided sandbox data incomplete, missing file key ${e}`)}}},687:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SandboxMode=void 0,(r=t.SandboxMode||(t.SandboxMode={})).react="react",r.angular="angular"},20:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SNBAngularBundler=t.SNBAngularBundlerFileKeys=void 0;const n=r(969);var o;!function(e){e.componentSCSS="componentSCSS",e.componentHTML="componentHTML",e.componentTS="componentTS",e.moduleTS="moduleTS",e.package="package",e.stylesSCSS="stylesSCSS"}(o=t.SNBAngularBundlerFileKeys||(t.SNBAngularBundlerFileKeys={}));class i extends n.SNBBundler{validateFiles(e){if("string"!=typeof e[o.componentSCSS])throw new Error(`Unable to create sandbox bundle, missing declaration file under expected key ${o.componentSCSS}`);if("string"!=typeof e[o.componentHTML])throw new Error(`Unable to create sandbox bundle, missing code file under expected key ${o.componentHTML}`);if("string"!=typeof e[o.componentTS])throw new Error(`Unable to create sandbox bundle, missing styling file under expected key ${o.componentTS}`);if("string"!=typeof e[o.moduleTS])throw new Error(`Unable to create sandbox bundle, missing styling file under expected key ${o.moduleTS}`);if("string"!=typeof e[o.package])throw new Error(`Unable to create sandbox bundle, missing styling file under expected key ${o.package}`)}buildSandboxPayload(){let e={"/src/app/app.component.scss":{code:this.buildAppComponentSCSS()},"/src/app/app.component.html":{code:this.buildAppComponentHTML()},"/src/app/app.component.ts":{code:this.buildAppComponentTS()},"/src/app/app.module.ts":{code:this.buildAppModuleTS()},"/src/environments/environment.prod.ts":{code:this.buildEnvironmentProdTS()},"/src/environments/environment.ts":{code:this.buildEnvironmentTS()},"/src/index.html":{code:this.buildIndexHTML()},"/src/main.ts":{code:this.buildMainTS()},"/src/polyfills.ts":{code:this.buildPolyfillsTS()},"/src/styles.scss":{code:this.buildStylesSCSS()},"/src/typings.d.ts":{code:this.buildTypingsDTS()},"/.angular-cli.json":{code:this.buildAngularCLIJSON()},"/package.json":{code:this.buildPackageJSON()},"/tsconfig.json":{code:this.buildTSConfigJSON()}};return console.log(e),e}buildAppComponentSCSS(){return this.files[o.componentSCSS]}buildAppComponentHTML(){return this.files[o.componentHTML]}buildAppComponentTS(){return this.files[o.componentTS]}buildAppModuleTS(){return this.files[o.moduleTS]}buildEnvironmentProdTS(){return"\nexport const environment = {\n    production: true\n};          \n        "}buildEnvironmentTS(){return"      \nexport const environment = {\n    production: false\n};  \n        "}buildIndexHTML(){return'\n<!doctype html>\n<html lang="en">\n\n<head>\n    <meta charset="utf-8">\n    <title>Supernova.io | Angular Component Sandbox</title>\n    <base href="/">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n</head>\n\n<body>\n    <app-root></app-root>\n</body>\n\n</html>\n        '}buildMainTS(){return'\nimport { enableProdMode } from "@angular/core";\nimport { platformBrowserDynamic } from "@angular/platform-browser-dynamic";\n\nimport { AppModule } from "./app/app.module";\nimport { environment } from "./environments/environment";\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n        '}buildPolyfillsTS(){return'\nimport "core-js/proposals/reflect-metadata";\nimport "zone.js/dist/zone"; // Included with Angular CLI.\n        '}buildStylesSCSS(){return this.files[o.stylesSCSS]}buildTypingsDTS(){return"\ndeclare var module: NodeModule;\ninterface NodeModule {\n  id: string;\n}\n        "}buildAngularCLIJSON(){return'\n{\n    "apps": [\n        {\n            "root": "src",\n            "outDir": "dist",\n            "assets": ["assets"],\n            "index": "index.html",\n            "main": "main.ts",\n            "polyfills": "polyfills.ts",\n            "prefix": "app",\n            "styles": ["styles.scss"],\n            "scripts": [],\n            "environmentSource": "environments/environment.ts",\n            "environments": {\n                "dev": "environments/environment.ts",\n                "prod": "environments/environment.prod.ts"\n            }\n        }\n    ]\n}          \n        '}buildPackageJSON(){return this.files[o.package]}buildTSConfigJSON(){return'\n{\n    "compileOnSave": false,\n    "compilerOptions": {\n        "baseUrl": "./",\n        "outDir": "./dist/out-tsc",\n        "sourceMap": true,\n        "declaration": false,\n        "downlevelIteration": true,\n        "experimentalDecorators": true,\n        "moduleResolution": "node",\n        "importHelpers": true,\n        "target": "es2015",\n        "module": "es2020",\n        "lib": [\n        "es2018",\n        "dom"\n        ]\n    }\n}\n        '}}t.SNBAngularBundler=i},969:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SNBBundler=t.SandboxContentAlignment=void 0,(r=t.SandboxContentAlignment||(t.SandboxContentAlignment={})).start="start",r.center="center",r.end="end",t.SNBBundler=class{constructor(e,t){this.validateFiles(e),this.files=e,this.visualSettings=t}validateFiles(e){throw new Error("Unable to use generic bundler, please provide type-specific implementation")}buildSandboxPayload(){throw new Error("Unable to use generic bundler, please provide type-specific implementation")}}},633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SNBReactBundler=t.SNBReactBundlerFileKeys=void 0;const n=r(969);var o;!function(e){e.package="package",e.code="code",e.styling="styling"}(o=t.SNBReactBundlerFileKeys||(t.SNBReactBundlerFileKeys={}));class i extends n.SNBBundler{validateFiles(e){if("string"!=typeof e[o.package])throw new Error(`Unable to create sandbox bundle, missing declaration file under expected key ${o.package}`);if("string"!=typeof e[o.code])throw new Error(`Unable to create sandbox bundle, missing code file under expected key ${o.code}`);if("string"!=typeof e[o.styling])throw new Error(`Unable to create sandbox bundle, missing styling file under expected key ${o.styling}`)}buildSandboxPayload(){let e={"/public/index.html":{code:this.buildIndexFile()},"/src/App.js":{code:this.buildAppJS()},"/src/index.js":{code:this.buildIndexJS()},"/package.json":{code:this.buildPackageJSON()},"/src/styles.css":{code:this.buildStylesCSS()}};return console.log(e),e}buildIndexFile(){return'\n        <!DOCTYPE html>\n        <html lang="en">\n        <head>\n            <meta charset="utf-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1o">\n            <title>Supernova.io | React Component Sandbox</title>\n        </head>\n        <div id="root"></div>\n        </body>\n        </html>'}alignmentToFlexString(e){switch(e){case n.SandboxContentAlignment.start:return"flex-start";case n.SandboxContentAlignment.center:return"center";case n.SandboxContentAlignment.end:return"flex-end"}}buildAppJS(){return this.files[o.code]}buildIndexJS(){var e,t;return`\n        import ReactDOM from "react-dom/client";\n        import App from "./App";\n        import "./styles.css";\n\n        /* Configure body style */\n        document.body.style.margin = "0px";\n\n        // Create a root.\n        const container = document.getElementById("root");\n        const root = ReactDOM.createRoot(container);\n\n        // Initial render\n        root.render(\n        <div\n            style={{\n            height: "100vh",\n            display: "flex",\n            justifyContent: "${this.alignmentToFlexString(null!==(e=this.visualSettings.horizontalAlignment)&&void 0!==e?e:n.SandboxContentAlignment.center)}",\n            alignItems: "${this.alignmentToFlexString(null!==(t=this.visualSettings.verticalAlignment)&&void 0!==t?t:n.SandboxContentAlignment.center)}"\n            }}\n            className="sandbox"\n        >\n            <App />\n        </div>\n        );\n        `}buildPackageJSON(){return this.files[o.package]}buildStylesCSS(){return this.files[o.styling]}}t.SNBReactBundler=i},339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.atobUnicode=t.btoaUnicode=void 0,t.btoaUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})))},t.atobUnicode=function(e){return decodeURIComponent(Array.prototype.map.call(atob(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(()=>{"use strict";const e=r(191);window.sandboxEngine=new e.SNBComponentSandboxEngine})()})();
//# sourceMappingURL=sandbox.js.map