(()=>{var e={866:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SandpackClient:()=>f,SandpackLogLevel:()=>u,addPackageJSONIfNeeded:()=>l,createPackageJSON:()=>s,extractErrorDetails:()=>d});var r=n(313),o=n(799),i=n.n(o),a='[sandpack-client]: "dependencies" was not specified - provide either a package.json or a "dependencies" value';function s(e={},t={},n="/index.js"){return JSON.stringify({name:"sandpack-project",main:n,dependencies:e,devDependencies:t},null,2)}function l(e,t,n,r){var o,i;let l={...e},d=l["/package.json"]?"/package.json":l["package.json"]?"package.json":void 0;if(!d){if(!t)throw new Error(a);if(!r)throw new Error('[sandpack-client]: "entry" was not specified - provide either a package.json with the "main" field or na "entry" value');return l["/package.json"]={code:s(t,n,r)},l}if(d){let e=JSON.parse(l[d].code);if(!t&&!e.dependencies)throw new Error(a);t&&(e.dependencies={...null!=(o=e.dependencies)?o:{},...null!=t?t:{}}),n&&(e.devDependencies={...null!=(i=e.devDependencies)?i:{},...null!=n?n:{}}),r&&!e.main&&(e.main=r),l[d]={code:JSON.stringify(e,null,2)}}return l}function d(e){if("SyntaxError"===e.title){let{title:t,path:n,message:r,line:o,column:i}=e;return{title:t,path:n,message:r,line:o,column:i}}let t=function(e){if(e)return e.find((e=>!!e._originalFileName))}(e.payload.frames);if(!t)return{message:e.message};let n=function(e){let t=e._originalScriptCode[e._originalScriptCode.length-1].lineNumber.toString().length,n=2+t+3+e._originalColumnNumber;return e._originalScriptCode.reduce(((e,r)=>{let o=r.highlight?">":" ",i=r.lineNumber.toString().length===t?`${r.lineNumber}`:` ${r.lineNumber}`,a=r.highlight?"\n"+" ".repeat(n)+"^":"";return e+"\n"+o+" "+i+" | "+r.content+a}),"")}(t),r=function(e){return e?` (${e._originalLineNumber}:${e._originalColumnNumber})`:""}(t);return{message:c(t._originalFileName,e.message,r,n),title:e.title,path:t._originalFileName,line:t._originalLineNumber,column:t._originalColumnNumber}}function c(e,t,n,r){return`${e}: ${t}${n}\n${r}`}var u,p,h=`https://${"1.2.2".replace(/\./g,"-")}-sandpack.codesandbox.io/`,f=class{constructor(e,t,n={}){var r;if(this.getTranspilerContext=()=>new Promise((e=>{let t=this.listen((n=>{"transpiler-context"===n.type&&(e(n.data),t())}));this.dispatch({type:"get-transpiler-context"})})),this.options=n,this.sandboxInfo=t,this.bundlerURL=n.bundlerURL||h,this.bundlerState=void 0,this.errors=[],this.status="initializing","string"==typeof e){this.selector=e;let t=document.querySelector(e);if(!t)throw new Error(`[sandpack-client]: the element '${e}' was not found`);this.element=t,this.iframe=document.createElement("iframe"),this.initializeElement()}else this.element=e,this.iframe=e;this.iframe.getAttribute("sandbox")||this.iframe.setAttribute("sandbox","allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts");let o=n.startRoute?new URL(n.startRoute,this.bundlerURL).toString():this.bundlerURL;null==(r=this.iframe.contentWindow)||r.location.replace(o),this.iframeProtocol=new class{constructor(e,t){this.globalListeners={},this.globalListenersCount=0,this.channelListeners={},this.channelListenersCount=0,this.channelId=Math.floor(1e6*Math.random()),this.frameWindow=e.contentWindow,this.origin=t,this.globalListeners=[],this.channelListeners=[],this.eventListener=this.eventListener.bind(this),"undefined"!=typeof window&&window.addEventListener("message",this.eventListener)}cleanup(){window.removeEventListener("message",this.eventListener),this.globalListeners={},this.channelListeners={},this.globalListenersCount=0,this.channelListenersCount=0}register(){!this.frameWindow||this.frameWindow.postMessage({type:"register-frame",origin:document.location.origin,id:this.channelId},this.origin)}dispatch(e){!this.frameWindow||this.frameWindow.postMessage({$id:this.channelId,codesandbox:!0,...e},this.origin)}globalListen(e){if("function"!=typeof e)return()=>{};let t=this.globalListenersCount;return this.globalListeners[t]=e,this.globalListenersCount++,()=>{delete this.globalListeners[t]}}channelListen(e){if("function"!=typeof e)return()=>{};let t=this.channelListenersCount;return this.channelListeners[t]=e,this.channelListenersCount++,()=>{delete this.channelListeners[t]}}eventListener(e){if(e.source!==this.frameWindow)return;let t=e.data;!t.codesandbox||(Object.values(this.globalListeners).forEach((e=>e(t))),t.$id===this.channelId&&Object.values(this.channelListeners).forEach((e=>e(t))))}}(this.iframe,this.bundlerURL),this.unsubscribeGlobalListener=this.iframeProtocol.globalListen((e=>{"initialized"!==e.type||!this.iframe.contentWindow||(this.iframeProtocol.register(),this.options.fileResolver&&(this.fileResolverProtocol=new class{constructor(e,t,n){this.type=e,this.handleMessage=t,this.protocol=n,this._disposeMessageListener=this.protocol.channelListen((async e=>{if(e.type===this.getTypeId()&&e.method){let t=e;try{let e=await this.handleMessage(t),n={type:this.getTypeId(),msgId:t.msgId,result:e};this.protocol.dispatch(n)}catch(e){let n={type:this.getTypeId(),msgId:t.msgId,error:{message:e.message}};this.protocol.dispatch(n)}}}))}getTypeId(){return`protocol-${this.type}`}dispose(){this._disposeMessageListener()}}("fs",(async e=>{if("isFile"===e.method)return this.options.fileResolver.isFile(e.params[0]);if("readFile"===e.method)return this.options.fileResolver.readFile(e.params[0]);throw new Error("Method not supported")}),this.iframeProtocol)),this.updatePreview(this.sandboxInfo,!0))})),this.unsubscribeChannelListener=this.iframeProtocol.channelListen((e=>{switch(e.type){case"start":this.errors=[];break;case"status":this.status=e.status;break;case"action":"show-error"===e.action&&(this.errors=[...this.errors,d(e)]);break;case"state":this.bundlerState=e.state}}))}cleanup(){this.unsubscribeChannelListener(),this.unsubscribeGlobalListener(),this.iframeProtocol.cleanup()}updateOptions(e){i()(this.options,e)||(this.options=e,this.updatePreview())}updatePreview(e=this.sandboxInfo,t){var n,o,i,a;this.sandboxInfo={...this.sandboxInfo,...e};let l=this.getFiles(),d=Object.keys(l).reduce(((e,t)=>({...e,[t]:{code:l[t].code,path:t}})),{}),c=JSON.parse(s(this.sandboxInfo.dependencies,this.sandboxInfo.devDependencies,this.sandboxInfo.entry));try{c=JSON.parse(l["/package.json"].code)}catch(e){console.error("[sandpack-client]: could not parse package.json file: "+e.message)}let p=Object.keys(l).reduce(((e,t)=>({...e,[t]:{content:l[t].code,path:t}})),{});this.dispatch({type:"compile",codesandbox:!0,version:3,isInitializationCompile:t,modules:d,reactDevTools:this.options.reactDevTools,externalResources:this.options.externalResources||[],hasFileResolver:Boolean(this.options.fileResolver),disableDependencyPreprocessing:this.sandboxInfo.disableDependencyPreprocessing,template:this.sandboxInfo.template||(0,r.t4)(c,p),showOpenInCodeSandbox:null==(n=this.options.showOpenInCodeSandbox)||n,showErrorScreen:null==(o=this.options.showErrorScreen)||o,showLoadingScreen:null==(i=this.options.showLoadingScreen)||i,skipEval:this.options.skipEval||!1,clearConsoleDisabled:!this.options.clearConsoleOnFirstCompile,logLevel:null!=(a=this.options.logLevel)?a:u.Info,customNpmRegistries:this.options.customNpmRegistries})}dispatch(e){this.iframeProtocol.dispatch(e)}listen(e){return this.iframeProtocol.channelListen(e)}getCodeSandboxURL(){let e=this.getFiles(),t=Object.keys(e).reduce(((t,n)=>({...t,[n.replace("/","")]:{content:e[n].code,isBinary:!1}})),{});return fetch("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",body:JSON.stringify({files:t}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.json())).then((e=>({sandboxId:e.sandbox_id,editorUrl:`https://codesandbox.io/s/${e.sandbox_id}`,embedUrl:`https://codesandbox.io/embed/${e.sandbox_id}`})))}getFiles(){let{sandboxInfo:e}=this;return void 0===e.files["/package.json"]?l(e.files,e.dependencies,e.devDependencies,e.entry):this.sandboxInfo.files}initializeElement(){if(this.iframe.style.border="0",this.iframe.style.width=this.options.width||"100%",this.iframe.style.height=this.options.height||"100%",this.iframe.style.overflow="hidden",!this.element.parentNode)throw new Error("[sandpack-client]: the given iframe does not have a parent.");this.element.parentNode.replaceChild(this.iframe,this.element)}};(p=u||(u={}))[p.None=0]="None",p[p.Error=10]="Error",p[p.Warning=20]="Warning",p[p.Info=30]="Info",p[p.Debug=40]="Debug"},313:(e,t)=>{"use strict";var n="sandbox.config.json";t.t4=function(e,t){var r=t[n]||t["/"+n];if(r)try{var o=JSON.parse(r.content);if(o.template)return o.template}catch(e){}var i=e.dependencies,a=void 0===i?{}:i,s=e.devDependencies,l=void 0===s?{}:s,d=Object.keys(a).concat(Object.keys(l)),c=["nuxt","nuxt-edge"];if(d.some((function(e){return c.indexOf(e)>-1})))return"nuxt";if(d.indexOf("next")>-1)return"next";var u=["apollo-server","apollo-server-express","apollo-server-hapi","apollo-server-koa","apollo-server-lambda","apollo-server-micro"];if(d.some((function(e){return u.indexOf(e)>-1})))return"apollo";if(d.indexOf("ember-cli")>-1)return"ember";if(d.indexOf("sapper")>-1)return"sapper";var p=Object.keys(t);if(p.some((function(e){return e.endsWith(".vue")})))return"vue-cli";if(p.some((function(e){return e.endsWith(".re")})))return"reason";if(d.indexOf("gatsby")>-1)return"gatsby";if(d.indexOf("parcel-bundler")>-1)return"parcel";if(d.indexOf("react-scripts")>-1)return"create-react-app";if(d.indexOf("react-scripts-ts")>-1)return"create-react-app-typescript";if(d.indexOf("@angular/core")>-1)return"angular-cli";if(d.indexOf("preact-cli")>-1)return"preact-cli";if(d.indexOf("svelte")>-1)return"svelte";if(d.indexOf("vue")>-1)return"vue-cli";var h=["@dojo/core","@dojo/framework"];return d.some((function(e){return h.indexOf(e)>-1}))?"@dojo/cli-create-app":d.indexOf("cx")>-1?"cxjs":d.indexOf("@nestjs/core")>-1||d.indexOf("@nestjs/common")>-1?"nest":void 0}},799:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Array]",s="[object Boolean]",l="[object Date]",d="[object Error]",c="[object Function]",u="[object Map]",p="[object Number]",h="[object Object]",f="[object Promise]",b="[object RegExp]",g="[object Set]",m="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",S="[object DataView]",x=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[i]=_[a]=_[v]=_[s]=_[S]=_[l]=_[d]=_[c]=_[u]=_[p]=_[h]=_[b]=_[g]=_[m]=_[y]=!1;var k="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,C="object"==typeof self&&self&&self.Object===Object&&self,j=k||C||Function("return this")(),O=t&&!t.nodeType&&t,A=O&&e&&!e.nodeType&&e,T=A&&A.exports===O,E=T&&k.process,L=function(){try{return E&&E.binding&&E.binding("util")}catch(e){}}(),N=L&&L.isTypedArray;function I(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function P(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function B(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var M,$,D,F=Array.prototype,U=Function.prototype,z=Object.prototype,R=j["__core-js_shared__"],J=U.toString,W=z.hasOwnProperty,H=(M=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",K=z.toString,q=RegExp("^"+J.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=T?j.Buffer:void 0,V=j.Symbol,Y=j.Uint8Array,Q=z.propertyIsEnumerable,X=F.splice,Z=V?V.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=G?G.isBuffer:void 0,ne=($=Object.keys,D=Object,function(e){return $(D(e))}),re=Ae(j,"DataView"),oe=Ae(j,"Map"),ie=Ae(j,"Promise"),ae=Ae(j,"Set"),se=Ae(j,"WeakMap"),le=Ae(Object,"create"),de=Ne(re),ce=Ne(oe),ue=Ne(ie),pe=Ne(ae),he=Ne(se),fe=V?V.prototype:void 0,be=fe?fe.valueOf:void 0;function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ye;++t<n;)this.add(e[t])}function Se(e){var t=this.__data__=new me(e);this.size=t.size}function xe(e,t){for(var n=e.length;n--;)if(Ie(e[n][0],t))return n;return-1}function we(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?function(e){var t=W.call(e,Z),n=e[Z];try{e[Z]=void 0;var r=!0}catch(e){}var o=K.call(e);return r&&(t?e[Z]=n:delete e[Z]),o}(e):function(e){return K.call(e)}(e)}function _e(e){return Ue(e)&&we(e)==i}function ke(e,t,n,r,o){return e===t||(null==e||null==t||!Ue(e)&&!Ue(t)?e!=e&&t!=t:function(e,t,n,r,o,c){var f=Be(e),y=Be(t),x=f?a:Ee(e),w=y?a:Ee(t),_=(x=x==i?h:x)==h,k=(w=w==i?h:w)==h,C=x==w;if(C&&Me(e)){if(!Me(t))return!1;f=!0,_=!1}if(C&&!_)return c||(c=new Se),f||ze(e)?Ce(e,t,n,r,o,c):function(e,t,n,r,o,i,a){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case v:return!(e.byteLength!=t.byteLength||!i(new Y(e),new Y(t)));case s:case l:case p:return Ie(+e,+t);case d:return e.name==t.name&&e.message==t.message;case b:case m:return e==t+"";case u:var c=P;case g:var h=1&r;if(c||(c=B),e.size!=t.size&&!h)return!1;var f=a.get(e);if(f)return f==t;r|=2,a.set(e,t);var y=Ce(c(e),c(t),r,o,i,a);return a.delete(e),y;case"[object Symbol]":if(be)return be.call(e)==be.call(t)}return!1}(e,t,x,n,r,o,c);if(!(1&n)){var j=_&&W.call(e,"__wrapped__"),O=k&&W.call(t,"__wrapped__");if(j||O){var A=j?e.value():e,T=O?t.value():t;return c||(c=new Se),o(A,T,n,r,c)}}return!!C&&(c||(c=new Se),function(e,t,n,r,o,i){var a=1&n,s=je(e),l=s.length;if(l!=je(t).length&&!a)return!1;for(var d=l;d--;){var c=s[d];if(!(a?c in t:W.call(t,c)))return!1}var u=i.get(e);if(u&&i.get(t))return u==t;var p=!0;i.set(e,t),i.set(t,e);for(var h=a;++d<l;){var f=e[c=s[d]],b=t[c];if(r)var g=a?r(b,f,c,t,e,i):r(f,b,c,e,t,i);if(!(void 0===g?f===b||o(f,b,n,r,i):g)){p=!1;break}h||(h="constructor"==c)}if(p&&!h){var m=e.constructor,y=t.constructor;m==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,o,c))}(e,t,n,r,ke,o))}function Ce(e,t,n,r,o,i){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var d=i.get(e);if(d&&i.get(t))return d==t;var c=-1,u=!0,p=2&n?new ve:void 0;for(i.set(e,t),i.set(t,e);++c<s;){var h=e[c],f=t[c];if(r)var b=a?r(f,h,c,t,e,i):r(h,f,c,e,t,i);if(void 0!==b){if(b)continue;u=!1;break}if(p){if(!I(t,(function(e,t){if(a=t,!p.has(a)&&(h===e||o(h,e,n,r,i)))return p.push(t);var a}))){u=!1;break}}else if(h!==f&&!o(h,f,n,r,i)){u=!1;break}}return i.delete(e),i.delete(t),u}function je(e){return function(e,t,n){var r=t(e);return Be(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Re,Te)}function Oe(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Ae(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Fe(e)||function(e){return!!H&&H in e}(e))&&($e(e)?q:x).test(Ne(e))}(n)?n:void 0}ge.prototype.clear=function(){this.__data__=le?le(null):{},this.size=0},ge.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ge.prototype.get=function(e){var t=this.__data__;if(le){var n=t[e];return n===r?void 0:n}return W.call(t,e)?t[e]:void 0},ge.prototype.has=function(e){var t=this.__data__;return le?void 0!==t[e]:W.call(t,e)},ge.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=le&&void 0===t?r:t,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(e){var t=this.__data__,n=xe(t,e);return!(n<0||(n==t.length-1?t.pop():X.call(t,n,1),--this.size,0))},me.prototype.get=function(e){var t=this.__data__,n=xe(t,e);return n<0?void 0:t[n][1]},me.prototype.has=function(e){return xe(this.__data__,e)>-1},me.prototype.set=function(e,t){var n=this.__data__,r=xe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ye.prototype.clear=function(){this.size=0,this.__data__={hash:new ge,map:new(oe||me),string:new ge}},ye.prototype.delete=function(e){var t=Oe(this,e).delete(e);return this.size-=t?1:0,t},ye.prototype.get=function(e){return Oe(this,e).get(e)},ye.prototype.has=function(e){return Oe(this,e).has(e)},ye.prototype.set=function(e,t){var n=Oe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ve.prototype.add=ve.prototype.push=function(e){return this.__data__.set(e,r),this},ve.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.clear=function(){this.__data__=new me,this.size=0},Se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Se.prototype.get=function(e){return this.__data__.get(e)},Se.prototype.has=function(e){return this.__data__.has(e)},Se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof me){var r=n.__data__;if(!oe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ye(r)}return n.set(e,t),this.size=n.size,this};var Te=ee?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,o=null==t?0:t.length,i=0,a=[];++r<o;){var s=t[r];l=s,Q.call(e,l)&&(a[i++]=s)}var l;return a}(ee(e)))}:function(){return[]},Ee=we;function Le(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||w.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ie(e,t){return e===t||e!=e&&t!=t}(re&&Ee(new re(new ArrayBuffer(1)))!=S||oe&&Ee(new oe)!=u||ie&&Ee(ie.resolve())!=f||ae&&Ee(new ae)!=g||se&&Ee(new se)!=y)&&(Ee=function(e){var t=we(e),n=t==h?e.constructor:void 0,r=n?Ne(n):"";if(r)switch(r){case de:return S;case ce:return u;case ue:return f;case pe:return g;case he:return y}return t});var Pe=_e(function(){return arguments}())?_e:function(e){return Ue(e)&&W.call(e,"callee")&&!Q.call(e,"callee")},Be=Array.isArray,Me=te||function(){return!1};function $e(e){if(!Fe(e))return!1;var t=we(e);return t==c||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function De(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Fe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ue(e){return null!=e&&"object"==typeof e}var ze=N?function(e){return function(t){return e(t)}}(N):function(e){return Ue(e)&&De(e.length)&&!!_[we(e)]};function Re(e){return null!=(t=e)&&De(t.length)&&!$e(t)?function(e,t){var n=Be(e),r=!n&&Pe(e),o=!n&&!r&&Me(e),i=!n&&!r&&!o&&ze(e),a=n||r||o||i,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var d in e)!t&&!W.call(e,d)||a&&("length"==d||o&&("offset"==d||"parent"==d)||i&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||Le(d,l))||s.push(d);return s}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||z))return ne(e);var t,n,r=[];for(var o in Object(e))W.call(e,o)&&"constructor"!=o&&r.push(o);return r}(e);var t}e.exports=function(e,t){return ke(e,t)}},191:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SNBComponentSandboxEngine=t.SNBSandboxMessageStatus=void 0;const r=n(866),o=n(687),i=n(20),a=n(969),s=n(633),l=n(339);var d;!function(e){e.unknown="unknown",e.initializing="initializing",e.installingDependencies="installingDependencies",e.transpiling="transpiling",e.evaluating="evaluating",e.done="done",e.error="error"}(d=t.SNBSandboxMessageStatus||(t.SNBSandboxMessageStatus={})),t.SNBComponentSandboxEngine=class{constructor(){this.updateSandboxCodeDebounced=this.debounce(((e,t,n)=>this.updateSandboxCodeInternal(e,t,n))),this.trackedSandboxes=new Map,this.trackedConfigurations=new Map,this.trackedInitialStates=new Map}setObserver(e){this.listener=e}async getSessionAuthorizationToken(e){try{let t=await fetch(e,{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"}}),n=await t.json();const r=null==n?void 0:n.accessToken;return"string"==typeof r?r:null}catch(e){return null}}async buildSandboxesSessionAuthorized(e,t){let n=await this.getSessionAuthorizationToken(t);this.buildSandboxesTokenAuthorized(e,n)}async buildSandboxesTokenAuthorized(e,t){for(let n of e)this.buildSandboxWithPageTarget(n,t)}async buildSandboxesAnonymous(e){for(let t of e)this.buildSandboxWithPageTarget(t,null)}getSandboxTargetsStartingWith(e){const t=`[id^="${e}"]`;var n=document.querySelectorAll(t);return Array.from(n).map((e=>e.id))}getSandboxTargetsEndingWith(e){const t=`[id$="${e}]`;var n=document.querySelectorAll(t);return Array.from(n).map((e=>e.id))}buildSandboxWithPageTarget(e,t){try{if(this.trackedSandboxes.get(e))throw new Error(`Sandbox for id ${e} was already created. You can only create one tracked sandbox per target`);let n=document.querySelector(`#${e}`);if(!n)throw new Error(`Can't build sandbox with target ${e} as there is no such target in the current context`);if("div"!==n.nodeName.toLowerCase()&&"iframe"!==n.nodeName.toLowerCase())throw new Error("Sandbox can only be created on element types of div or iframe (div is preferred)");let o=this.validateConstructDataFromElement(n),i=[];o.decodedConfiguration.registry&&(i=[{enabledScopes:o.decodedConfiguration.registry.enabledScopes,limitToScopes:!0,registryUrl:o.decodedConfiguration.registry.proxyUrl,proxyEnabled:!1,registryAuthToken:null!=t?t:void 0}]);let a={showErrorScreen:!0,showLoadingScreen:!1,showOpenInCodeSandbox:!0,customNpmRegistries:i},s=new r.SandpackClient(`#${e}`,o.payload,a);this.trackedSandboxes.set(e,s),this.trackedConfigurations.set(e,o.decodedConfiguration),this.trackedInitialStates.set(e,o.decodedConfiguration.files),this.listener&&s.listen((t=>{let n,r=d.unknown;switch(t.type){case"start":r=d.initializing;break;case"status":switch(t.status){case"evaluating":r=d.evaluating;break;case"installing-dependencies":r=d.installingDependencies;break;case"transpiling":r=d.transpiling}break;case"success":r=d.done;break;case"action":"show-error"===t.action&&(r=d.error,n=t.message)}r!==d.unknown&&this.listener({details:t,status:r,sandboxId:e,error:n})}))}catch(t){this.listener&&this.listener({error:t.message,status:d.error,sandboxId:e})}}updateSandbox(e,t){if(!this.trackedSandboxes.get(e))throw new Error(`Sandbox ${e} can't be updated because it wasn't created yet`);let n=this.trackedSandboxes.get(e),r=this.validateConstructDataFromEncodedData(t);n.updatePreview(r.payload),this.trackedConfigurations.set(e,r.decodedConfiguration)}getSandboxCode(e,t){if(!this.trackedSandboxes.get(e)||!this.trackedConfigurations.get(e))throw new Error(`Can't get sandbox code for sandbox ${e} because it wasn't created yet`);let n=this.trackedConfigurations.get(e);if(!n.files||!n.files.hasOwnProperty(t))throw new Error(`Can't get sandbox code for sandbox ${e} because incorrect file key ${t} was provided. This key is not supported by ${n.type} bundler.`);return n.files[t]}getCodeForSandboxId(e,t){if(!this.trackedConfigurations.get(e))throw new Error(`Unknown code sandbox for id ${e}`);let n=this.trackedConfigurations.get(e);if(!n.files||!n.files.hasOwnProperty(t))throw new Error(`Can't get sandbox code for sandbox ${e} because incorrect file key ${t} was provided. This key is not supported by ${n.type} bundler.`);return n.files[t]}updateSandboxCode(e,t){this.updateSandboxCodeDebounced(e,t)}updateSandboxCodeInternal(e,t,n){if(!this.trackedSandboxes.get(e)||!this.trackedConfigurations.get(e))throw new Error(`Sandbox ${e} can't be updated because it wasn't created yet`);let r=this.trackedSandboxes.get(e),o=this.trackedConfigurations.get(e);if(!o.files||!o.files.hasOwnProperty(n))throw new Error(`Sandbox ${e} can't be updated because incorrect file key ${n} was provided. This key is not supported by ${o.type} bundler.`);o.files[n]=t;let i=this.createBundledData(o);r.updatePreview(i),this.trackedConfigurations.set(e,o)}debounce(e,t=300){let n;return(...r)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(this,r)}),t)}}async openInSandbox(e){if(!this.trackedSandboxes.get(e)||!this.trackedConfigurations.get(e))throw new Error(`Sandbox ${e} can't be updated because it wasn't created yet`);let t=this.trackedSandboxes.get(e),n=await t.getCodeSandboxURL();return window.open(n.editorUrl,"_blank"),n.editorUrl}createBundledData(e){var t,n;let r;switch(e.type){case o.SandboxMode.react:r=new s.SNBReactBundler(e.files,null!==(t=e.visual)&&void 0!==t?t:{});break;case o.SandboxMode.angular:r=new i.SNBAngularBundler(e.files,null!==(n=e.visual)&&void 0!==n?n:{});break;default:throw new Error(`Unsupported bundler type ${e.type}`)}return{files:r.buildSandboxPayload()}}resetSandboxToInitial(e){if(!this.trackedConfigurations.get(e))throw new Error(`Unknown code sandbox for id ${e}`);let t=this.trackedInitialStates.get(e),n=this.trackedSandboxes.get(e),r=this.trackedConfigurations.get(e);r.files=t;let o=this.createBundledData(r);n.updatePreview(o),this.trackedConfigurations.set(e,r)}encodeSandboxData(e,t,n,r){var o,i;let s=a.SandboxContentAlignment.center;if(n.alignment)switch(n.alignment){case"left":s=a.SandboxContentAlignment.start;break;case"center":s=a.SandboxContentAlignment.center;break;case"right":s=a.SandboxContentAlignment.end}let d={type:e,files:t,visual:{horizontalAlignment:s,verticalAlignment:a.SandboxContentAlignment.center,backgroundHex:null!==(o=n.backgroundColor)&&void 0!==o?o:void 0,padding:null!==(i=n.padding)&&void 0!==i?i:void 0,showCodeSandboxButton:!1},registry:r};return console.log(d),l.btoaUnicode(JSON.stringify(d))}setSandboxDataBeforeLoad(e,t){let n=document.querySelector(`#${e}`);if(!n)throw new Error("Can't inject sandbox data to target. This usually means that you are trying to update sandbox that was already created - this is no-op, use updateSandbox instead.");n.setAttribute("sn-sandbox-data",t)}validateConstructDataFromElement(e){let t=e.getAttribute("sn-sandbox-data");if(!t||0===t.length)throw new Error("Sandbox doesn't provide any valid data");return this.validateConstructDataFromEncodedData(t)}validateConstructDataFromEncodedData(e){let t;try{const n=l.atobUnicode(e);t=JSON.parse(n)}catch(e){throw new Error("Unable to decode sandbox data: Provided sandbox data corrupted")}return this.validateFilesFromEncodedData(t.type,t.files),{payload:this.createBundledData(t),decodedConfiguration:t}}validateFilesFromEncodedData(e,t){let n;switch(e){case o.SandboxMode.angular:n=i.SNBAngularBundlerFileKeys;break;case o.SandboxMode.react:n=s.SNBReactBundlerFileKeys;break;default:throw new Error(`Unable to decode sandbox data: Unsupported platform ${e}`)}for(let e of Object.values(n))if(!t.hasOwnProperty(e))throw new Error(`Unable to decode sandbox data: Provided sandbox data incomplete, missing file key ${e}`)}}},687:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SandboxMode=void 0,(n=t.SandboxMode||(t.SandboxMode={})).react="react",n.angular="angular"},20:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SNBAngularBundler=t.SNBAngularBundlerFileKeys=void 0;const r=n(969);var o;!function(e){e.componentSCSS="componentSCSS",e.componentHTML="componentHTML",e.componentTS="componentTS",e.moduleTS="moduleTS",e.package="package",e.stylesSCSS="stylesSCSS"}(o=t.SNBAngularBundlerFileKeys||(t.SNBAngularBundlerFileKeys={}));class i extends r.SNBBundler{validateFiles(e){if("string"!=typeof e[o.componentSCSS])throw new Error(`Unable to create sandbox bundle, missing declaration file under expected key ${o.componentSCSS}`);if("string"!=typeof e[o.componentHTML])throw new Error(`Unable to create sandbox bundle, missing code file under expected key ${o.componentHTML}`);if("string"!=typeof e[o.componentTS])throw new Error(`Unable to create sandbox bundle, missing styling file under expected key ${o.componentTS}`);if("string"!=typeof e[o.moduleTS])throw new Error(`Unable to create sandbox bundle, missing styling file under expected key ${o.moduleTS}`);if("string"!=typeof e[o.package])throw new Error(`Unable to create sandbox bundle, missing styling file under expected key ${o.package}`)}buildSandboxPayload(){let e={"/src/app/app.component.scss":{code:this.buildAppComponentSCSS()},"/src/app/app.component.html":{code:this.buildAppComponentHTML()},"/src/app/app.component.ts":{code:this.buildAppComponentTS()},"/src/app/app.module.ts":{code:this.buildAppModuleTS()},"/src/environments/environment.prod.ts":{code:this.buildEnvironmentProdTS()},"/src/environments/environment.ts":{code:this.buildEnvironmentTS()},"/src/index.html":{code:this.buildIndexHTML()},"/src/main.ts":{code:this.buildMainTS()},"/src/polyfills.ts":{code:this.buildPolyfillsTS()},"/src/styles.scss":{code:this.buildStylesSCSS()},"/src/typings.d.ts":{code:this.buildTypingsDTS()},"/.angular-cli.json":{code:this.buildAngularCLIJSON()},"/package.json":{code:this.buildPackageJSON()},"/tsconfig.json":{code:this.buildTSConfigJSON()}};return console.log(e),e}buildAppComponentSCSS(){return this.files[o.componentSCSS]}buildAppComponentHTML(){return this.files[o.componentHTML]}buildAppComponentTS(){return this.files[o.componentTS]}buildAppModuleTS(){return this.files[o.moduleTS]}buildEnvironmentProdTS(){return"\nexport const environment = {\n    production: true\n};          \n        "}buildEnvironmentTS(){return"      \nexport const environment = {\n    production: false\n};  \n        "}buildIndexHTML(){return'\n<!doctype html>\n<html lang="en">\n\n<head>\n    <meta charset="utf-8">\n    <title>Supernova.io | Angular Component Sandbox</title>\n    <base href="/">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n</head>\n\n<body>\n    <app-root></app-root>\n</body>\n\n</html>\n        '}buildMainTS(){return'\nimport { enableProdMode } from "@angular/core";\nimport { platformBrowserDynamic } from "@angular/platform-browser-dynamic";\n\nimport { AppModule } from "./app/app.module";\nimport { environment } from "./environments/environment";\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n        '}buildPolyfillsTS(){return'\nimport "core-js/proposals/reflect-metadata";\nimport "zone.js/dist/zone"; // Included with Angular CLI.\n        '}buildStylesSCSS(){return this.files[o.stylesSCSS]}buildTypingsDTS(){return"\ndeclare var module: NodeModule;\ninterface NodeModule {\n  id: string;\n}\n        "}buildAngularCLIJSON(){return'\n{\n    "apps": [\n        {\n            "root": "src",\n            "outDir": "dist",\n            "assets": ["assets"],\n            "index": "index.html",\n            "main": "main.ts",\n            "polyfills": "polyfills.ts",\n            "prefix": "app",\n            "styles": ["styles.scss"],\n            "scripts": [],\n            "environmentSource": "environments/environment.ts",\n            "environments": {\n                "dev": "environments/environment.ts",\n                "prod": "environments/environment.prod.ts"\n            }\n        }\n    ]\n}          \n        '}buildPackageJSON(){return this.files[o.package]}buildTSConfigJSON(){return'\n{\n    "compileOnSave": false,\n    "compilerOptions": {\n        "baseUrl": "./",\n        "outDir": "./dist/out-tsc",\n        "sourceMap": true,\n        "declaration": false,\n        "downlevelIteration": true,\n        "experimentalDecorators": true,\n        "moduleResolution": "node",\n        "importHelpers": true,\n        "target": "es2015",\n        "module": "es2020",\n        "lib": [\n        "es2018",\n        "dom"\n        ]\n    }\n}\n        '}}t.SNBAngularBundler=i},969:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SNBBundler=t.SandboxContentAlignment=void 0,(n=t.SandboxContentAlignment||(t.SandboxContentAlignment={})).start="start",n.center="center",n.end="end",t.SNBBundler=class{constructor(e,t){this.validateFiles(e),this.files=e,this.visualSettings=t}validateFiles(e){throw new Error("Unable to use generic bundler, please provide type-specific implementation")}buildSandboxPayload(){throw new Error("Unable to use generic bundler, please provide type-specific implementation")}}},633:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SNBReactBundler=t.SNBReactBundlerFileKeys=void 0;const r=n(969);var o;!function(e){e.package="package",e.code="code",e.styling="styling"}(o=t.SNBReactBundlerFileKeys||(t.SNBReactBundlerFileKeys={}));class i extends r.SNBBundler{validateFiles(e){if("string"!=typeof e[o.package])throw new Error(`Unable to create sandbox bundle, missing declaration file under expected key ${o.package}`);if("string"!=typeof e[o.code])throw new Error(`Unable to create sandbox bundle, missing code file under expected key ${o.code}`);if("string"!=typeof e[o.styling])throw new Error(`Unable to create sandbox bundle, missing styling file under expected key ${o.styling}`)}buildSandboxPayload(){let e={"/public/index.html":{code:this.buildIndexFile()},"/src/App.js":{code:this.buildAppJS()},"/src/index.js":{code:this.buildIndexJS()},"/package.json":{code:this.buildPackageJSON()},"/src/styles.css":{code:this.buildStylesCSS()}};return console.log(e),e}buildIndexFile(){return'\n        <!DOCTYPE html>\n        <html lang="en">\n        <head>\n            <meta charset="utf-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1o">\n            <title>Supernova.io | React Component Sandbox</title>\n        </head>\n        <div id="root"></div>\n        </body>\n        </html>'}alignmentToFlexString(e){switch(e){case r.SandboxContentAlignment.start:return"flex-start";case r.SandboxContentAlignment.center:return"center";case r.SandboxContentAlignment.end:return"flex-end"}}buildAppJS(){return this.files[o.code]}buildIndexJS(){var e,t;return`\n        import ReactDOM from "react-dom/client";\n        import App from "./App";\n        import "./styles.css";\n\n        /* Configure body style */\n        document.body.style.margin = "0px";\n\n        // Create a root.\n        const container = document.getElementById("root");\n        const root = ReactDOM.createRoot(container);\n\n        // Initial render\n        root.render(\n        <div\n            style={{\n            height: "100vh",\n            display: "flex",\n            justifyContent: "${this.alignmentToFlexString(null!==(e=this.visualSettings.horizontalAlignment)&&void 0!==e?e:r.SandboxContentAlignment.center)}",\n            alignItems: "${this.alignmentToFlexString(null!==(t=this.visualSettings.verticalAlignment)&&void 0!==t?t:r.SandboxContentAlignment.center)}"\n            }}\n            className="sandbox"\n        >\n            <App />\n        </div>\n        );\n        `}buildPackageJSON(){return this.files[o.package]}buildStylesCSS(){return this.files[o.styling]}}t.SNBReactBundler=i},339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.atobUnicode=t.btoaUnicode=void 0,t.btoaUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})))},t.atobUnicode=function(e){return decodeURIComponent(Array.prototype.map.call(atob(e),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";const e=n(191);window.sandboxEngine=new e.SNBComponentSandboxEngine})()})();
//# sourceMappingURL=sandbox.js.map